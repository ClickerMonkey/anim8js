<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body {
        padding: 0;
        margin: 0;
        background-color: #666;
      }
      #canvas {
        background-color: black;
      }
    </style>
  </head>
  <body onload="init()">

    <div id="container">

    </div>

    <script src="../assets/js/pixi.js"></script>
    <script src="../assets/js/anim8js.js"></script>
    <script src="../assets/js/anim8js-pixi.js"></script>
    <script src="examples.js"></script>

    <script>

      function Mouse()
      {
        return {
          x: Mouse.x,
          y: Mouse.y
        };
      };
      Mouse.x = Mouse.y = 0;

      function init()
      {
        var viewWidth = 832;
        var viewHeight = 500;

        // Create a pixi renderer
        var renderer = PIXI.autoDetectRenderer(viewWidth, viewHeight, {antialias: true});
        renderer.view.className = "rendererView";
        renderer.view.id = 'canvas';
        renderer.backgroundColor = 0x000000;

        $listen( renderer.view, 'mousemove', function(mouse, ev)
        {
          var offset = getOffsetMouse( ev );

          Mouse.x = offset.x;
          Mouse.y = offset.y;
        });

        // add render view to DOM
        container.appendChild( renderer.view );

        // create an new instance of a pixi stage
        var stage = new PIXI.Container();

        // the object to animate
        var circle = new PIXI.Circle(0, 0, 30);
        var tinter = {tint: anim8.Color.parse('#3333FF')};
        var outliner = {lineWidth: 1, lineColor: 0xFFFFFF};
        var graphics = new PIXI.Graphics();
        stage.addChild( graphics );

        anim8( graphics ).play({
          springs: {
            position: {
              type: 'linear',
              rest: Mouse,
              damping: 2.5,
              stiffness: -30
            }
          }
        });

        anim8( tinter ).tween('tint', 'red', 'blue', 'infinite yoyo 4s ~0.5s');
        anim8( circle ).tween('radius', 30, 50, 'infinite yoyo');
        anim8( outliner ).tween('lineWidth', 1, 5, 'infinite yoyo 2s');

        anim8.on('end', function()
        {
          graphics.clear();
          graphics.beginFill( tinter.tint, 1.0 );
          graphics.lineStyle( outliner.lineWidth, outliner.lineColor );
          graphics.drawShape( circle );
          graphics.endFill();

          renderer.render( stage );
        });
      }

    </script>
  </body>
</html>
