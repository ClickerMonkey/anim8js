<!DOCTYPE html>
<html>
  <head>
    <style>
    body, html {
      padding: 0;
      margin: 0;
      width: 100%;
      height: 100%;
      background-color: #222;
    }
    .box {
      width: 10px;
      height: 10px;
      position: absolute;
      background-color: orange;
    }
    </style>
  </head>
  <body>

    <script src="../assets/js/anim8js.js"></script>
    <script src="../assets/js/anim8js-dom.js"></script>

    <script src="examples.js"></script>

    <!--[if lte IE 8]>
    <script src="../build/anim8js-ie.js"></script>
    <![endif]-->

    <script>

      var GetDimensions = function()
      {
        return {
          x: windowWidth(),
          y: windowHeight()
        };
      };

      anim8.save('toMouseConstant', {
        travel: {
          center: {
            from: anim8.computed.random({min:0, max: GetDimensions}),
            to: MousePosition,
            velocity: 200,
            epsilon: 10
          }
        }
      });

      anim8.save('toMouseAccel', {
        travel: {
          center: {
            from: anim8.computed.random({min: 0, max: GetDimensions}),
            to: MousePosition,
            acceleration: 10000,
            epsilon: 10,
            terminal: 800
          }
        }
      });

      anim8.save('explode', {
        keyframe: {
          from: {
            scale: 1,
            rotate: 0,
            opacity: 1,
            backgroundColor: 'orange'
          },
          to: {
            scale: 10,
            rotate: anim8.computed.random({min:0, max:3600}),
            opacity: 0,
            backgroundColor: 'red'
          }
        }
      });

      var addTraveler = function(mouse, ev, type)
      {
        var bullet = document.createElement('div');
        bullet.className = 'box';
        document.body.appendChild( bullet );

        var animator = m8( bullet );

        animator.play( ev.type === 'click' ? 'toMouseConstant' : 'toMouseAccel' )
        animator.onCycleEnd(function() {
          this.play( 'explode 0.5s' );
          this.onCycleEnd(function() {
            this.destroy();
            document.body.removeChild( this.subject );
          })
        });
      };

      $listen( document, 'click', addTraveler );
      $listen( document, 'dblclick', addTraveler );

    </script>

  </body>
</html>
