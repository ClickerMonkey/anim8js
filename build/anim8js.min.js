/* anim8js 1.1.1 - anim8js - Anim8 Everything by Philip Diffenderfer */
!function(t,e){"function"==typeof define&&define.amd?define("anim8",[],function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(global):(t.m8=t.anim8=e(t),t.m8s=t.anim8s=t.anim8.anim8s)}(this,function(t){function e(){}function r(t){return"undefined"!=typeof t}function n(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(t){return"number"==typeof t}function a(t){return"boolean"==typeof t}function s(t){return"string"==typeof t}function o(t){return t instanceof Array}function u(t){return"object"==typeof t&&null!==t}function c(t){if(o(t)||s(t))return 0===t.length;if(null===t)return!0;if(u(t))for(var e in t)return!1;else if(i(t))return 0!==t;return!0}function h(t,e){if(s(t))return e?t.split(e):[t];if(o(t))return t;if(u(t)){var n=[];for(var i in t)n.push(i);return n}return r(t)?[t]:[]}function l(t){if(o(t)){for(var e=[],r=0;r<t.length;r++)e.push(l(t[r]));t=e}else if(u(t)){var e={};for(var n in t)e[n]=l(t[n]);t=e}return t}function f(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(u(r))for(var n in r)n in t||(t[n]=r[n])}return t}function p(t,e,n,i){return r(t)?t:r(e)?e:r(n)?n:i}function m(t){return function(){return t}}function d(t,e){return n(t)?e?t.apply(this,e):t():t}function g(t,e,r,n){this.name=t,this.input=e,this.options=r,this.attrimators=n}function v(t){this.reset(t)}function y(t){this.$=[],o(t)&&this.fill(t)}function b(){}function x(){this.reset()}function w(){}function A(t,e,r,n){this.input=t,this.oldOptions=e||{},this.newOptions=r||{},this.forObject=n,this.prepareSpecifics("easings"),this.prepareSpecifics("repeats"),this.prepareSpecifics("delays"),this.prepareSpecifics("sleeps"),this.prepareSpecifics("durations"),this.prepareSpecifics("offsets"),this.prepareSpecifics("scales"),this.prepareSpecifics("scaleBases"),this.prepareSpecifics("parameters")}function M(){}function T(t,e){this.$factory=t;for(var r=0;r<e.length;r++)this[e[r]]=this.$push(e[r])}function I(t,e,r,n){this.$reset(t,e,r,n)}function S(t,e,r,n,i,a,s,o,u,c,h,l,f,m,d,g){this.reset(t,f,m),this.path=e,this.easing=Tr(n),this.duration=Mr(r),this.sleep=Fr(a),this.repeat=hn(o),this.scale=qr(u),this.scaleBase=e.calculator.parse(c,e.calculator.ZERO),this.parameters=h,this.hasInitialState=p(l,!0),this.delay=wr(i),this.offset=zr(s),this.input=d,this.mergeId=g}function N(){this.priority=0}function C(t){if(this.reset(),t instanceof C)this.putMap(t);else if(u(t))for(var e in t)this.put(e,t[e])}function z(t,e,r,n,i,a,s){this.reset(t,i,a),this.value=e,this.hasInitialState=p(n,!0),this.delay=wr(r),this.applied=!1,this.input=s}function O(){}function P(t,e,r,n,i,a,s,o){this.reset(t,e,null),this.calculator=r,this.position=n,this.velocity=i,this.acceleration=a,this.terminal=Cr(s,Number.POSITIVE_INFINITY),this.stopTime=ln(o,Number.POSITIVE_INFINITY),this.finished=!1}function E(t,e,r){this.animators=t,this.delay=wr(e),this.easing=Tr(r)}function q(){}function F(t){if(t instanceof v)return t;var e=Nr(t,!0);return e===!1?!1:e.animatorFor(t)}function V(t){var e=Nr(t,!0),r=[];if(e!==!1)return e.animatorsFor(t,r),new y(r);o(t)||(t=[t]);for(var r=[],n=0;n<t.length;n++){var i=F(t[n]);i!==!1&&r.push(i)}return new y(r)}function R(){return _r}function $(){return Yr}function k(t){Yr=t}function D(t){j(t),H()}function j(t){t.active||(t.active=!0,Ur.push(t))}function H(){_r||(_r=!0,F.trigger("starting"),Xr(B))}function B(){F.trigger("begin");var t=jr(),e=Ur.length();Ur.preupdate(t,e),Ur.update(t,e),Ur.apply(e),Ur.filter(Ur.handleFinished),F.trigger("end"),Ur.length()||Yr?Xr(B):(_r=!1,F.trigger("finished"))}function L(t){return Ur.pause(t),F}function Z(t){return Ur.resume(t),F}function G(t){return Ur.stop(t),F}function _(t){return Ur.end(t),F}function Y(t){return Ur.finish(t),F}function U(t){return Ur.nopeat(t),F}function X(t,e,r,n){return{r:p(t,255),g:p(e,255),b:p(r,255),a:p(n,1)}}function Q(t,e){if(s(t)&&n(e))return e.computed=!0,Q[t]=e,e;if(n(t))return t.computed=!0,t;throw t+" and "+e+" are not valid parameters for creating a computed function."}function W(t){return s(t)&&/^[+-]\d*\.?\d+$/.test(t)}function K(t){return n(t)&&t.computed}function J(t,e,r,i){return i instanceof M?r=i.parse(r):n(i)&&(r=i(t,e,r)),K(r)?r(t,e):d(r)}function te(t,r){switch(r){case Dr.THIS:return function(){for(var e=this.$||this,r=0;r<e.length;r++)e[r][t].apply(e[r],arguments);return this};case Dr.RESULTS:return function(){for(var e=this.$||this,r=[],n=0;n<e.length;n++)r.push(e[n][t].apply(e[n],arguments));return r};case Dr.FIRST:return function(){var e=this.$||this;return 0===e.length?void 0:e[0][t].apply(e[0],arguments)};case Dr.TRUE:return function(){for(var e=this.$||this,r=0;r<e.length;r++)if(e[r][t].apply(e[r],arguments))return!0;return!1}}return e}function ee(t){return function(e,r){for(var n in t)r[t[n]]=e[n]}}function re(t,e){return function(r,n){u(n[t])||(n[t]={}),n[t][e]=r}}function ne(t){return function(e,r){for(var n=0;n<t.length;n++)r[t[n]]=e}}function ie(t){$r.defineProperty(t,"on",ce),$r.defineProperty(t,"once",he),$r.defineProperty(t,"off",le),$r.defineProperty(t,"trigger",fe)}function ae(t,e,n,i,a){var n=h(n," ");r(t[e])||$r.defineProperty(t,e,{});for(var s=0;s<n.length;s++)r(t[e][n[s]])||(t[e][n[s]]=[]),t[e][n[s]].push([i,a||t])}function se(t,e,r){if(t&&e in t)for(var n=t[e],i=n.length-1;i>=0;i--)n[i][0]===r&&n.splice(i,1)}function oe(t,e){t&&e in t&&delete t[e]}function ue(t,e,r,n){if(t&&e in t){for(var i=t[e],a=i.length,s=0;a>s;s++){var o=i[s];o[0].call(o[1],r)}n&&(i.length!==a?t[e]=i.slice(a):delete t[e])}}function ce(t,e,r){return ae(this,"$on",t,e,r),this}function he(t,e,r){return ae(this,"$once",t,e,r),this}function le(t,e){if(r(t)){var t=h(t," ");if(n(e))for(var i=0;i<t.length;i++)se(this.$on,t[i],e),se(this.$once,t[i],e);else for(var i=0;i<t.length;i++)oe(this.$on,t[i]),oe(this.$once,t[i])}else delete this.$on,delete this.$once;return this}function fe(t,e){return ue(this.$on,t,e,!1),ue(this.$once,t,e,!0),this}function pe(t,e){if(0>t&&(t=-t),0>e&&(e=-e),e>t){var r=t;t=e,e=r}for(;;){if(0===e)return t;if(t%=e,0===t)return e;e%=t}}function me(t,e){var r,n=1,i=1;for(e>t/2&&(e=t-e);e>=1;)n*=t--,i*=e--,r=pe(n,i),n/=r,i/=r;return n}function de(t,e,r){return e>t?e:t>r?r:t}function ge(t,e){return function(r){return de(r,t,e)}}function ve(t){return t*Qr}function ye(t){return t*Wr}function be(t){return function(e){return e%t}}function xe(t,e,r){var n,i;if(e){var a=xr(e),s=a.parse(r);n=function(){return a},i=function(t,e,r){return a.parse(r,s,!0)}}else n=function(t,e){return e.getAttribute(t.attribute).calculator},i=function(t,e,r){return e.getAttribute(t.attribute).parse(r,!0)};return we(n,i,function(e,r){return J(e,r,e.parameters[t],i)})}function we(t,e,r){return f(r,Kr),r.getCalculator=t,r.parseValue=e,Q(r)}function Ae(t,e,r){var n=t.getCalculator,i=t.parseValue;return r&&(r=xr(r),n=function(){return r},i=function(t,e,n){return r.parse(n,void 0,!0)}),we(n,i,function(r,i){var a=n(r,i);return e(r,i,t,a)})}function Me(t,e,r){var e=vr(e,p(r,tn.options),tn.cache,tn.forObject),n=tn.prefix+t,i=n.toLowerCase();e.name=n,Jr[i]=e}function Te(t,e){var i=l(tn);if(s(t))tn.prefix+=t;else if(u(t)){if(s(t.prefix)&&(tn.prefix+=t.prefix),r(t.cache)&&(tn.cache=t.cache),r(t.options)){var a=Or(t.options,tn.cache);a!==kr.noOptions&&f(tn.options,a)}if(r(t.forObject)&&(tn.forObject=t.forObject),r(t.factory)){var o=Sr(t.factory);o&&(tn.forObject=o)}}if(u(e))for(var c in e)Me(c,e[c]);else n(e)&&e();tn=i}function Ie(t,e,r,n,i){var a=vr(t,n,i),o=a.newAttrimators();for(var u in e){var c=e[u];o.get(u).attribute=c,o.rekey(u,c)}var h=new g(r,a.input,a.options,o);return s(r)&&Me(r,h),h}function Se(){this.createConstants()}function Ne(){this.createConstants()}function Ce(){this.createConstants()}function ze(){this.createConstants()}function Oe(){this.createConstants()}function Pe(){this.createConstants()}function Ee(){this.createConstants()}function qe(){this.priority=0,this.attributes={}}function Fe(){}function Ve(){}function Re(){}function $e(){}function ke(){}function De(){}function je(){}function He(){}function Be(){}function Le(){}function Ze(){}function Ge(){}function _e(){}function Ye(){}function Ue(t,e,r,n){this.name=t,this.set(e,r,n)}function Xe(t,e,r,n,i,a,s){this.name=t,this.set(e,r,n,i,a,s)}function Qe(t,e,r,n){this.name=t,this.set(e,r,n)}function We(t,e,r,n){this.name=t,this.set(e,r,n)}function Ke(t,e,r,n){this.name=t,this.set(e,r,n)}function Je(t,e,r,n){this.name=t,this.set(e,r,n)}function tr(t,e,r){this.name=t,this.set(e,r)}function er(t,e,r,n,i,a){this.name=t,this.set(e,r,n,i,a)}function rr(t,e,r,n,i,a){this.name=t,this.set(e,r,n,i,a)}function nr(t,e,r){this.name=t,this.set(e,r)}function ir(t,e,r,n,i){this.name=t,this.set(e,r,n,i)}function ar(t,e,r){this.name=t,this.set(e,r)}function sr(t,e,r){this.name=t,this.set(e,r)}function or(t,e,r,n,i){this.name=t,this.set(e,r,n,i)}function ur(t,e,r,n,i){this.name=t,this.set(e,r,n,i)}function cr(t,e,r,n){this.name=t,this.set(e,r,n)}function hr(t,e,r){this.name=t,this.set(e,r)}function lr(t,e,r,n){this.name=t,this.set(e,r,n)}function fr(t,e,r,n,i,a,s,o,u,c){this.set(t,e,n,r,o,u,c),this.distance=i,this.damping=a,this.stiffness=s,this.temp=null}function pr(t,e,r,n,i,a,s,o,u){this.set(t,e,n,r,s,o,u),this.damping=i,this.stiffness=a,this.temp0=null,this.temp1=null}function mr(t){this.name=t,this.currentTime=0,this.currentTimelines=[],this.sequenceDelay=0,this.sequenceEasing=Zr.linear,this.introduce=!1,this.timelines=new C,this.autoEnd=!1}function dr(t){this.speed=1,this.time=0,this.currentTime=0,this.playing=!1,this.movie=t,this.duration=t.duration(),this.run=this.runner(t,this)}function gr(t){this.animator=t,this.attrimators=new x,this.start=0}function vr(t,e,r,n){var e=Or(e,r),i=!c(e);if(t instanceof g){if(i){var a=t.newAttrimators();return t.merge(e,a),new g(!1,t.input,e,a)}return t}if(s(t)){var o=t.toLowerCase();if(o in Jr&&!i)return Jr[o];var a=yr(t,e,r);return o in Jr&&!i?Jr[o]:new g(!1,{},e,a)}if(u(t)){var a=yr(t,e,r,n);return new g(!1,t,e,a)}return!1}function yr(t,e,r,n){var i=Or(e,r),a=!c(i),o=new x;if(t instanceof g)o.putMap(t.newAttrimators()),a&&t.merge(i,o);else if(u(t)){var h=new A(t,i,{},n);for(var l in t){var m=br(l);m!==!1&&m.parse(t,i,o,h)}}else if(s(t)){var d=t.toLowerCase(),v=Jr[d],y=p(r,kr.cache);if(v)o.putMap(v.newAttrimators()),a&&v.merge(i,o);else{for(var b=t.split(/\s*,\s*/),w=0;w<b.length;w++){for(var M=b[w].split(/\s*&\s*/),T=new x,I=0;I<M.length;I++){var S=Hr(M[I].toLowerCase()),N=S.split(/\s+/),C=Jr[N[0]];if(!C)throw S+' is not a valid animation in "'+b[w]+'"';var z=Or(N.slice(1),r),O=!c(z),P=C.newAttrimators();a&&O?C.merge(f({},i,z),P):O?C.merge(z,P):a&&C.merge(i,P),T.putMap(P)}o.queueMap(T)}y&&!a&&(Jr[d]=new g(t,{},{},o))}}return o}function br(t){return t instanceof w?t:s(t)&&t in nn?nn[t]:!1}function xr(t){return t instanceof M?t:s(t)&&t in an?an[t]:an["default"]}function wr(t){return ln(t,kr.delay)}function Ar(t,e){for(var r=t[0],n=1;n<t.length;n++)r=Math.max(r,t[n]);for(var i=e?[]:t,a=1/r,n=0;n<t.length;n++)i[n]=t[n]*a;return i}function Mr(t){return ln(t,kr.duration)}function Tr(t,e){if(n(t))return t;if(s(t)){var a=null,u=1,c=t.indexOf("*");if(-1!==c&&(u=parseFloat(t.substring(c+1)),t=t.substring(0,c)),t in Zr)a=Zr[t];else if(t in Lr)a=Lr[t](Tr(kr.easing));else if(-1!==t.indexOf("-")){var h=t.split("-"),l=h[0],f=h[1];h.length>=2&&l in Zr&&f in Lr&&(a=Lr[f](Zr[l]))}if(null!==a&&isFinite(u)&&1!==u&&(a=Zr.scale(u,a)),null!==a)return a}if(o(t)&&4===t.length&&i(t[0])&&i(t[1])&&i(t[2])&&i(t[3]))return Zr.bezier.apply(null,t);if(!r(t))return Tr(kr.easing);if(r(e))return e;throw t+" is not a valid easing"}function Ir(t,e){if(n(t))return t;if(s(t)&&t in Lr)return Lr[t];if(e)return!1;throw t+" is not a valid easing type"}function Sr(t,e){if(t instanceof N)return t;if(s(t)&&t in sn)return sn[t];if(e){if(e instanceof N)return e;if(e instanceof E&&(e=e.animators),e instanceof y&&(e=e.$[0]),e instanceof v&&e.factory)return e.factory}return sn["default"]}function Nr(t,e){var r=!1;for(var n in sn){var i=sn[n];i.is(t)&&(r===!1||r.priority<i.priority)&&(r=i)}if(r)return r;if(e)return!1;throw"No factory exists for subject "+t}function Cr(t,e){var r=parseFloat(t);return isNaN(r)?e:r}function zr(t){return ln(t,kr.offset)}function Or(t,e){var r=t,n=p(e,kr.cacheOptions);if(s(t)){if(t in cn)return cn[t];t=t.toLowerCase().split(/\s+/)}if(o(t)){for(var i={},a=0;a<t.length;a++){var c=t[a],h=c.charAt(0),l=c.indexOf("=");if(-1!==l){var f=c.substring(0,l),m=c.substring(l+1);i.parameters||(i.parameters={}),i.parameters[f]=m}else if("x"===h)Pr(c.substring(1),i,hn,"repeat","repeatAdd","repeatScale");else if("z"===h)Pr(c.substring(1),i,ln,"sleep","sleepAdd","sleepScale");else if("~"===h)Pr(c.substring(1),i,ln,"delay","delayAdd","delayScale");else if("!"===h)Pr(c.substring(1),i,Cr,"scale","scaleAdd","scaleScale");else if("@"===h)Pr(c.substring(1),i,ln,"offset","offsetAdd","offsetScale");else{var d=Tr(c,!1);d!==!1&&(i.easing=d);var g=Pr(c,i,ln,"duration","durationAdd","durationScale");g===!1&&Pr(c,i,hn,"repeat","repeatAdd","repeatScale")}}return s(r)&&n&&(cn[r]=i),i}return u(t)?t:kr.noOptions}function Pr(t,e,r,n,i,a){var s=t.charAt(0);if("*"===s)o=Cr(t.substring(1),!1),o!==!1&&(e[a]=o);else{("+"===s||"-"===s)&&(n=i,t=t.substring(1));var o=r(t,!1);o!==!1&&(e[n]=o)}return o}function Er(t){if(t instanceof O)return t;if(s(t)&&t in on)return on[t];if(u(t)&&t.type in on)return on[t.type](t);throw t+" is not a valid path"}function qr(t){return Cr(t,kr.scale)}function Fr(t){return ln(t,kr.sleep)}function Vr(t){if(t instanceof q)return t;if(s(t)&&t in un)return un[t];if(u(t)&&t.type in un)return un[t.type](t);throw t+" is not a valid spring"}function Rr(t,e){var r=t;if(s(t)){if(t in fn)return fn[t];t=t.toLowerCase().split(/\s+/)}if(o(t)){var n=t;t={};for(var i=0;i<n.length;i++){var a=n[i],c=a.charAt(0);if("<"===c){var h=ln(a.substring(1),!1);isNaN(h)||(t.intro=h)}else if(">"===c){var l=ln(a.substring(1),!1);isNaN(l)||(t.outro=l)}else if("/"===c){var f=Cr(a.substring(1),!1);f!==!1&&(t.granularity=f)}else if("^"===c){var m=ln(a.substring(1),!1);m!==!1&&(t.lookup=m)}else{var d=Tr(a,!1);d!==!1&&(t.easing=d);var g=ln(a,!1);g!==!1&&(t.time=g)}}}return u(t)?(t.time=ln(t.time,kr.transitionTime),t.outro=ln(t.outro,kr.transitionOutro),t.intro=ln(t.intro,kr.transitionIntro),t.easing=Tr(p(t.easing,kr.transitionEasing)),t.granularity=Cr(t.granularity,kr.transitionGranularity),t.lookup=ln(t.lookup,kr.transitionLookup),s(r)&&p(e,kr.cacheTransitions)&&(fn[r]=t),t):kr.noTransition}var $r={superPrefix:"_",extend:function(t,e,r){function n(){}n.prototype=e.prototype,t.prototype=new n,u(r)&&this.define(t,r)},define:function(t,e){var r=t.prototype;for(var n in e)n in r&&this.defineProperty(r,this.superPrefix+n,r[n]),this.defineProperty(r,n,e[n])},defineProperty:function(t,e,r){Object.defineProperty?Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:r}):t[e]=r}},kr={duration:1e3,easing:"ease",teasing:"linear",delay:0,sleep:0,repeat:1,scale:1,offset:0,transitionTime:500,transitionOutro:100,transitionIntro:100,transitionEasing:"linear",transitionGranularity:0,transitionLookup:10,cache:!1,cacheOptions:!1,cacheTransitions:!1,noOptions:{},noTransition:{},frameRate:16,pauseTime:5,comboPathUniformGranularity:100,calculatorNumber:0,calculator2d:{x:0,y:0},calculator3d:{x:0,y:0,z:0},calculatorQuaternion:{x:0,y:0,z:0,angle:0},calculatorRGB:{r:0,g:0,b:0},calculatorRGBA:{r:0,g:0,b:0,a:1},calculatorString:""},Dr={THIS:"this",RESULTS:"results",FIRST:"first",TRUE:"true"},jr=function(){return Date.now?Date.now:function(){return(new Date).getTime()}}(),Hr=function(){return String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^([\s]*)|([\s]*)$/g,"")}}(),Br=function(){var t=0;return function(){return++t}}();$r.define(g,{newAttrimators:function(){return this.attrimators.clone()},merge:function(t,e){var r=new A(this.input,this.options,t);for(var n in this.input){var i=br(n);i!==!1&&i.merge&&i.merge(this.input,t,this.options,e,r)}return e}}),$r.define(v,{reset:function(t){return this.subject=t,this.attrimators=new x,this.attrimatorsAdded=[],this.frame={},this.updated={},this.finished=!1,this.factory=null,this.active=!1,this.cycleCurrent=0,this.cycleNext=0,this.cycleEnded=0,this},newCycle:function(t){return this.cycleNext++,t instanceof x?this.cycleNext=t.applyCycle(this.cycleNext):t instanceof b&&(t.cycle=this.cycleNext),this},applyCurrentCycle:function(){for(var t=this.cycleCurrent,e=this.attrimators.values,r=e.length-1;r>=0;r--){var n=e[r],i=n.attribute;n.cycle===t&&(this.updated[i]=n.startCycle(this.frame)!==!1||this.updated[i])}return this},endCurrentCycle:function(){this.cycleCurrent>this.cycleEnded&&(this.cycleEnded=this.cycleCurrent,this.trigger("cycleEnd:"+this.cycleCurrent,this.cycleCurrent))},getAttribute:function(t){return this.factory.attribute(t)},restore:function(){return this},applyInitialState:function(){var t=jr();return this.preupdate(t),this.update(t),this.apply(),this},preupdate:function(t){var e=this.attrimatorsAdded;if(e.length){for(var r=0;r<e.length;r++){var n=e[r],i=n.attribute;i in this.subject?this.frame[i]=this.subject[i]:this.setDefault(i),n.start(t,this)}e.length=0}return this.trigger("preupdate"),this},setDefault:function(t){t in this.frame||(this.frame[t]=this.getAttribute(t).cloneDefault())},update:function(t){this.wasFinished=this.finished,this.finished=!0;for(var e=this.attrimators.values,r=this.cycleNext,n=e.length-1;n>=0;n--){var i=e[n],a=i.attribute;this.updated[a]=i.setTime(t,this.frame),this.finished=this.finished&&i.isFinished(),r=Math.min(r,i.cycle)}if(this.cycleCurrent<r){for(;this.cycleCurrent<r;)this.endCurrentCycle(),this.cycleCurrent++;this.cycleCurrent=r,this.applyCurrentCycle(),this.trigger("cycleStart:"+this.cycleCurrent,this.cycleCurrent)}return!this.wasFinished&&this.finished&&this.endCurrentCycle(),this.trigger("update"),this},placeAttrimator:function(t){var e=t.attribute,r=this.attrimators.get(e);return this.attrimators.put(e,t),this.attrimatorsAdded.push(t),this.finished=!1,r},apply:function(){for(var t in this.frame)this.updated[t]&&(this.subject[t]=this.frame[t],this.updated[t]=!1);return this.trigger("apply"),this.trimAttrimators(),this},trimAttrimators:function(){for(var t=this.attrimators.values,e=t.length-1;e>=0;e--){var r=t[e];r.isFinished()&&(r.next?this.placeAttrimator(r.next):this.attrimators.removeAt(e))}return!this.wasFinished&&this.finished&&this.trigger("finished",this),this},value:function(t){return this.frame[t]},activate:function(){return D(this),this},deactivate:function(){return this.trigger("deactivate",this),this},destroy:function(){return this.finished=!0,this.factory.destroy(this),this.trigger("destroyed"),this},spring:function(t){var t=Vr(t);return t===!1?!1:(this.newCycle(t),this.placeAttrimator(t),this.activate(),t)},play:function(t,e,r,n){var i=yr(t,e,n,this);return this.newCycle(i),this.playAttrimators(i,r),this.activate()},playAttrimators:function(t,e){e&&this.attrimators.finishNotPresent(t,0);for(var r=t.values,n=r.length-1;n>=0;n--)this.placeAttrimator(r[n]);return this},unplay:function(t,e,r,n,i){var e=Rr(e),a=yr(t,r,i,this);return this.unplayAttrimators(a,e,n),this.activate()},unplayAttrimators:function(t,e,r){for(var n=new x,i=t.values,a={},s=0;s<i.length;s++){var o=i[s],u=o.attribute;o.startCycle(a)&&n.put(u,new z(u,a[u],0,!0))}return this.newCycle(n),this.transitionAttrimators(e,n,r),this},queue:function(t,e,r){var n=yr(t,e,r,this);return this.newCycle(n),this.queueAttrimators(n),this.activate()},queueAttrimators:function(t){return this.attrimators.queueMap(t,0,this.placeAttrimator,this),this},insert:function(t,e,r){var n=yr(t,e,r,this);return this.newCycle(n),this.insertAttrimators(n),this.activate()},insertAttrimators:function(t){return this.attrimators.insertMap(t,this.placeAttrimator,this),this},transition:function(t,e,r,n,i){var t=Rr(t),a=yr(e,r,i,this);return this.newCycle(a),this.transitionAttrimators(t,a,n),this.activate()},transitionAttrimators:function(t,e,r){return r&&this.attrimators.finishNotPresent(e,t.time),this.attrimators.transitionMap(t,e,this.transitionGetValue,this.getAttribute,this.placeAttrimator,this.transitionGetValueAt,this.transitionStopAttrimator,this),this},transitionGetValue:function(t){return this.frame[t]},transitionGetValueAt:function(t,e,r){return t.valueAt(t.getElapsed()+e,r)},transitionStopAttrimator:function(t,e){t.stopIn(e)},tweenTo:function(t,e,r,n){var r=Or(r,n),i=this.getAttribute(t),a=i.parse(e),s=new lr(t,i.calculator,Q.current,a),o=S.fromOptions(t,s,r);return this.newCycle(o),this.placeAttrimator(o),this.activate()},tweenManyTo:function(t,e,r){var e=Or(e,r);this.newCycle();for(var n in t){var i=this.getAttribute(n),a=i.parse(t[n]),s=new lr(n,i.calculator,Q.current,a),o=S.fromOptions(n,s,e);o.cycle=this.cycleNext,this.placeAttrimator(o)}return this.activate()},tweenFrom:function(t,e,r,n){var r=Or(r,n),i=this.getAttribute(t),a=i.parse(e),s=new lr(t,i.calculator,a,Q.current),o=S.fromOptions(t,s,r);return this.newCycle(o),this.placeAttrimator(o),this.activate()},tweenManyFrom:function(t,e){var e=Or(e);this.newCycle();for(var r in t){var n=this.getAttribute(r),i=n.parse(t[r]),a=new lr(r,n.calculator,i,Q.current),s=S.fromOptions(r,a,e);s.cycle=this.cycleNext,this.placeAttrimator(s)}return this.activate()},tween:function(t,e,r,n,i){var n=Or(n,i),a=this.getAttribute(t),s=a.parse(e),o=a.parse(r),u=new lr(t,a.calculator,s,o),c=S.fromOptions(t,u,n);return this.newCycle(c),this.placeAttrimator(c),this.activate()},tweenMany:function(t,e,r,n){var r=Or(r,n);this.newCycle();for(var i in t){var a=this.getAttribute(i),s=a.parse(t[i]),o=a.parse(e[i]),u=new lr(i,a.calculator,s,o),c=S.fromOptions(i,u,r);c.cycle=this.cycleNext,this.placeAttrimator(c)}return this.activate()},move:function(t,e,r,n){var r=Or(r,n),i=this.getAttribute(t),a=i.parse(e),s=Q.current,o=K(a)?a:Q.relative(a),u=new lr(t,i.calculator,s,o),c=S.fromOptions(t,u,r);return this.newCycle(c),this.placeAttrimator(c),this.activate()},moveMany:function(t,e,r){var e=Or(e,r);this.newCycle();for(var n in t){var i=this.getAttribute(n),a=i.parse(t[n]),s=Q.current,o=K(a)?a:Q.relative(a),u=new lr(n,i.calculator,s,o),c=S.fromOptions(n,u,e);c.cycle=this.cycleNext,this.placeAttrimator(c)}return this.activate()},ref:function(t){var e=this,n=this.getAttribute(t),i={};return function(){if(t in e.frame)return e.frame[t];i[t]=!0;var a=e.get(i);return r(a[t])?a[t]:n.defaultValue}},follow:function(t,e,r,n){var r=Or(r,n),e=Er(e),i=S.fromOptions(t,e,r);return this.newCycle(i),this.placeAttrimator(i),this.activate()},attrimatorsFor:function(t,e){for(var r=this.attrimators,t=h(p(t,r.keys)," "),i=!n(e),a=[],s=t.length-1;s>=0;s--){var o=t[s],u=r.get(o);u&&(i?a.push(u):e.call(this,u,o))}return i?a:this},stop:function(t){return this.attrimatorsFor(t,function(t,e){this.attrimators.remove(e)})},end:function(t){return this.attrimatorsFor(t,function(t){for(;t.next;)t=t.next;t.finish(this.frame)})},finish:function(t){return this.attrimatorsFor(t,function(t){t.finish(this.frame)})},nopeat:function(t){return this.attrimatorsFor(t,function(t){t.nopeat()})},pause:function(t){return this.attrimatorsFor(t,function(t){t.pause()})},resume:function(t){return this.attrimatorsFor(t,function(t){t.resume()})},set:function(t){for(var e in t)this.frame[e]=t[e],this.updated[e]=!0;return this.apply(),this},unset:function(t){for(var t=h(p(t,this.frame)," "),e=t.length-1;e>=0;e--){var r=t[e];this.attrimators.remove(r),delete this.frame[r]}return this},get:function(t){var e={};for(var r in t)e[r]=this.frame[r];return e},timeRemaining:function(){return this.attrimators.timeRemaining()},hasAttrimators:function(){return this.attrimators.size()>0},getSubject:function(t){var e=this.subject;return n(t)&&(e=t(e)),e},invoke:function(t,e,r){return n(t)&&t.apply(e||this,r||[]),this},defer:function(t,e,r){return new I(this,this,t,e,r)},onCycleStart:function(t,e){return this.once("cycleStart:"+this.cycleNext,t,e),this},onCycleEnd:function(t,e){return this.once("cycleEnd:"+this.cycleNext,t,e),this}}),ie(v.prototype),$r.define(y,{push:function(t){return this.$.push(t),this},length:function(){return this.$.length},at:function(t){return this.$[t]},each:function(t,e){for(var r=this.$,n=0;n<r.length&&t.call(e||r[n],r[n],n)!==!1;n++);return this},fill:function(t){for(var e=0;e<t.length;e++)this.push(t[e]);return this},filter:function(t){for(var e=this.$,r=0,n=0;n<e.length;n++){var i=t(e[n]);i||(e[r++]=e[n])}return e.length=r,this},getSubjects:function(t){for(var e=this.$,r=[],i=0;i<e.length;i++)r.push(e[i].subject);return n(t)&&(r=t(r)),r},first:function(){return this.$[0]},reverse:function(){for(var t=this.$,e=t.length-1,r=Math.floor(t.length/2),n=0;r>n;n++){var i=t[n],a=t[e-n];t[n]=a,t[e-n]=i}return this},activate:function(){for(var t=this.$,e=0;e<t.length;e++)j(t[e]);return H(),this},sequence:function(t,e){return new E(this,t,e)},timeRemaining:function(){for(var t=this.$,e=0,r=0;r<t.length;r++)e=Math.max(e,t[r].timeRemaining());return e},preupdate:function(t,e){for(var r=this.$,n=e||r.length,i=0;n>i;i++)r[i].preupdate(t);return this},update:function(t,e){for(var r=this.$,n=e||r.length,i=0;n>i;i++)r[i].update(t);return this},apply:function(t){for(var e=this.$,r=t||e.length,n=0;r>n;n++)e[n].apply();return this},handleFinished:function(t){return t.finished&&(t.deactivate(),t.active=!1),t.finished},restore:te("restore",Dr.THIS),placeAttrimator:te("placeAttrimator",Dr.THIS),applyInitialState:te("applyInitialState",Dr.THIS),trimAttrimators:te("trimAttrimators",Dr.THIS),deactivate:te("deactivate",Dr.THIS),destroy:te("destroy",Dr.THIS),spring:te("spring",Dr.RESULTS),play:te("play",Dr.THIS),unplay:te("unplay",Dr.THIS),playAttrimators:te("playAttrimators",Dr.THIS),queue:te("queue",Dr.THIS),queueAttrimators:te("queueAttrimators",Dr.THIS),insert:te("insert",Dr.THIS),insertAttrimators:te("insertAttrimators",Dr.THIS),transition:te("transition",Dr.THIS),transitionAttrimators:te("transitionAttrimators",Dr.THIS),tween:te("tween",Dr.THIS),tweenTo:te("tweenTo",Dr.THIS),tweenFrom:te("tweenFrom",Dr.THIS),tweenMany:te("tweenMany",Dr.THIS),tweenManyTo:te("tweenManyTo",Dr.THIS),tweenManyFrom:te("tweenManyFrom",Dr.THIS),move:te("move",Dr.THIS),moveMany:te("moveMany",Dr.THIS),follow:te("follow",Dr.THIS),attrimatorsFor:te("attrimatorsFor",Dr.RESULTS),stop:te("stop",Dr.THIS),end:te("end",Dr.THIS),finish:te("finish",Dr.THIS),nopeat:te("nopeat",Dr.THIS),pause:te("pause",Dr.THIS),resume:te("resume",Dr.THIS),set:te("set",Dr.THIS),unset:te("unset",Dr.THIS),get:te("get",Dr.FIRST),hasAttrimators:te("hasAttrimators",Dr.TRUE),invoke:te("invoke",Dr.THIS),onCycleStart:te("onCycleStart",Dr.THIS),onCycleEnd:te("onCycleEnd",Dr.THIS),on:te("on",Dr.THIS),once:te("once",Dr.THIS),off:te("off",Dr.THIS),trigger:te("trigger",Dr.THIS)}),$r.define(b,{reset:function(t,e,r){this.attribute=t,this.builder=e,this.next=r,this.startTime=0,this.pauseTime=0,this.elapsed=0,this.stopTime=Number.POSITIVE_INFINITY,this.paused=!1,this.cycle=0,this.delay=0,this.offset=0},prestart:function(t){0===this.startTime&&(this.startTime=t-this.offset,this.elapsed=this.offset,this.finished=!1,this.prestartNext())},prestartNext:function(t){if(this.next&&0!==this.startTime&&(t&&(this.next.startTime=0),0===this.next.startTime)){var e=this.totalTime();isFinite(e)&&this.next.prestart(this.startTime+e)}},start:function(t){this.prestart(t)},startCycle:function(){return!1},setTime:function(t,e){if(this.paused)return!1;var r=!1,n=t-this.startTime;return n>this.stopTime?r=this.finish(e):n>=this.delay&&(r=this.update(n,e)),this.elapsed=n,r},update:function(){throw"Attrimator.update not implemented"},getElapsed:function(){return this.elapsed},stopIn:function(t){return this.stopTime=this.getElapsed()+t,this},stopAt:function(t){var e=this.totalTime();return t>e?this.next&&this.next.stopAt(t-e):this.stopTime=t,this},nopeat:function(){return this},valueAt:function(){return!1},valueAtSearch:function(t,e){var r=this.totalTime();return t>r?this.next?this.next.valueAtSearch(t-r,e):!1:this.valueAt(t,e)},attrimatorAt:function(t){var e=this.totalTime();return t>e?this.next?this.next.attrimatorAt(t-e):null:this},totalTime:function(){return this.stopTime},timeRemaining:function(){return this.totalTime()-this.elapsed+(this.next?this.next.timeRemaining():0)},clone:function(){throw"AttributeAnimator.clone not implemented"},hasComputed:function(){return!1},isInfinite:function(){return!isFinite(this.stopTime)},pause:function(){return this.paused||(this.pauseTime=jr(),this.paused=!0),this},resume:function(){if(this.paused){for(var t=jr()-this.pauseTime,e=this;e&&0!==e.startTime;)e.startTime+=t,e=e.next;this.paused=!1}return this},isPaused:function(){return this.paused},finish:function(){return!1},isFinished:function(){return!1},getBuilder:function(){return this.builder},queue:function(t){return this.next?this.next.queue(t):(this.next=t,this.prestartNext()),this},nextAt:function(t,e){var r=this.totalTime();return r>e?(this.stopTime=e,this.next=t):this.next?this.next.nextAt(t,e-r):(t.delay+=e-r,this.next=t),this},parseValue:function(t,e,r){var n=this.calculator.parse(e,r);return K(n)&&(n=n(this,t)),n}}),$r.extend(x,C,{setGroup:function(t,e,r){for(var n=this.values,i=n.length-1;i>=0;i--){var a=n[i];do(!a.groupId||e)&&(a.groupId=t),a=a.next;while(r&&a)}},delay:function(t){for(var e=this.values,r=0;r<e.length;r++)e[r].delay+=t;return this},queue:function(t){var e=t.attribute,r=this.get(e);return r?r.queue(t):this.put(e,t),r},queueMap:function(t,e,r,i){for(var a=this.timeRemaining(),s=t.values,o=n(r),u=p(e,0),c=a+u,h=s.length-1;h>=0;h--){var l=s[h],f=l.attribute,m=this.get(f);m?(m.isInfinite()?m.stopIn(l.delay+c):l.delay+=c-m.timeRemaining(),m.queue(l)):(l.delay+=c,this.put(f,l),o&&r.call(i||this,l))}return this},insertMap:function(t,e,r){for(var i=t.values,a=t.timeRemaining(),s=n(e),o=i.length-1;o>=0;o--){var u=i[o],c=u.attribute,h=this.get(c);this.put(c,u),h&&(u.isInfinite()?u.stopIn(a):h.delay+=a-u.timeRemaining(),u.queue(h)),s&&e.call(r||this,u)}return this},unqueueAt:function(t){var e=this.values[t];return e.next?this.values[t]=e.next:this.removeAt(t),this},playMapAt:function(t,e,r){e&&this.stopNotPresentAt(t,r);for(var n=t.values,i=0;i<n.length;i++)this.playAttrimatorAt(n[i],r);return this},playAttrimatorAt:function(t,e){var r=t.attribute,n=this.get(r);n?n.nextAt(t,e):(t.delay+=e,this.put(r,t))},transitionMap:function(t,e,n,i,a,s,o,u){var c=e.values;if(this.hasOverlap(e))for(var h=c.length-1;h>=0;h--){var l=c[h],f=l.attribute,p=this.get(f),m=n.call(u,f);if(p&&r(m)){var d=i.call(u,f),g=d.calculator,v=l.valueAt(0,g.create());if(v!==!1){var y=t.time,b=g.clone(m),x=t.outro?s.call(u,p,t.outro,g.create()):!1,w=t.intro?l.valueAt(t.intro,g.create()):!1,A=null;if(w!==!1&&t.intro<0&&t.lookup>0){var M=l.valueAt(t.lookup,g.create()),T=g.sub(M,v);if(T!==!1){var I=g.scale(T,t.intro/t.lookup),N=g.add(I,v);w=v,v=N}}if(A=x===!1&&w===!1?new lr(f,g,b,v):x===!1?new or(f,g,b,v,w):w===!1?new or(f,g,b,x,v):new er(f,g,b,x,v,w),t.granularity>2&&t.lookup>0){var C=x===!1?0:t.outro,z=x===!1?b:x,O=s.call(u,p,C+t.lookup,g.create()),P=w===!1?0:t.intro,E=w===!1?v:w,q=l.valueAt(P+t.lookup,g.create());if(O!==!1&&q!==!1){for(var F=g.sub(g.clone(O),z),V=g.length(F)/t.lookup,R=g.sub(g.clone(q),E),$=g.length(R)/t.lookup,k=new tr(f,A,t.granularity),D=k.points,j=D.length-1,H=0,B=[],L=0;j>L;L++)B[L]=H,H+=g.distance(D[L],D[L+1]);if(B[j]=H,!isNaN(H)){for(var Z=2*H/(V+$),G=.5*($-V)/Z,_=Z/j,Y=[],L=0;j>L;L++){var U=L*_,X=V*U+G*U*U;Y[L]=X/H}Y[j]=1,A=new Ue(f,g,D,Y),y=Z}}}var Q=new S(f,A,y,t.easing,0,0,0,1);Q.next=l,Q.cycle=l.cycle,l.offset=t.intro,a.call(u,Q)}else o.call(u,p,t.time+l.delay),p.queue(l),l.delay=0}else l.delay+=t.time,a.call(u,l)}else for(var h=c.length-1;h>=0;h--)a.call(u,c[h]);return this},finishNotPresent:function(t,e){for(var r=this.values,n=e||0,i=r.length-1;i>=0;i--){var a=r[i];t.has(a.attribute)||a.stopIn(n)}return this},stopNotPresentAt:function(t,e){for(var r=this.values,n=r.length-1;n>=0;n--){var i=r[n];t.has(i.attribute)||i.stopAt(e)}return this},clone:function(){for(var t=this.values,e=this.keys,r=new x,n=t.length-1;n>=0;n--)r.values[n]=t[n].clone(),r.keys[n]=e[n],r.indices[e[n]]=n;
return r},timeRemaining:function(t){for(var e=0,r=this.values,n=r.length-1;n>=0;n--){var i=r[n];if(i.isInfinite()){if(t)return Number.Infinity}else e=Math.max(e,i.timeRemaining())}return e},applyCycle:function(t){for(var e=this.values,r=null;e.length;){r=[];for(var n=e.length-1;n>=0;n--){var i=e[n];i.cycle=t,i.next&&r.push(i.next)}r.length&&t++,e=r}return t},iterate:function(t,e){for(var r=this.values,n=r.length-1;n>=0;n--)for(var i=r[n],a=null,s=0;i;)t.call(e||this,i,s++,a),i=(a=i).next;return this}}),w.nextMergeId=function(){var t=0;return function(){return t++}}(),$r.define(w,{parse:function(){throw"Builder.parse not implemented"},merge:function(t,e,r,n,i){var a=this,s=Sr(t.factory,i.forObject);n.iterate(function(t){t.getBuilder()===a&&a.mergeAttrimator(t,t.attribute,i,s)})},mergeAttrimator:function(t,e,r,n){t.easing=r.mergeEasing(e,t.easing),t.repeat=r.mergeRepeat(e,t.repeat),t.delay=r.mergeDelay(e,t.delay),t.sleep=r.mergeSleep(e,t.sleep),t.duration=r.mergeDuration(e,t.duration),t.offset=r.mergeOffset(e,t.offset),t.scale=r.mergeScale(e,t.scale),t.scaleBase=r.mergeScaleBase(e,t.scaleBase,n),t.parameters=r.mergeParameters(t.parameters)},submerge:function(t,e,r,n){var i=new A(t,r,e,this.forObject);for(var a in t){var s=br(a);s!==!1&&s.merge&&s.merge(t,e,r,n,i)}}}),$r.define(A,{prepareSpecifics:function(t){u(this.input[t])||(this.input[t]={})},parseEasing:function(t){return this.parseFirst(t,"easing","easings")},parseRepeat:function(t){return this.parseNumber(t,hn,hn,"repeat","repeatAdd","repeatScale","repeats")},parseDelay:function(t){return this.parseNumber(t,wr,ln,"delay","delayAdd","delayScale","delays")},parseSleep:function(t){return this.parseNumber(t,Fr,ln,"sleep","sleepAdd","sleepScale","sleeps")},parseDuration:function(t){return this.parseNumber(t,Mr,ln,"duration","durationAdd","durationScale","durations")},parseOffset:function(t){return this.parseNumber(t,zr,ln,"offset","offsetAdd","offsetScale","offsets")},parseScale:function(t){return this.parseNumber(t,qr,Cr,"scale","scaleAdd","scaleScale","scales")},parseScaleBase:function(t){return this.parseFirst(t,"scaleBase","scaleBases")},parseFirst:function(t,e,r){return p(this.input[r][t],this.oldOptions[e])},parseEvent:function(t,e,r,n){var i=this.parseDuration(t),a=this.parseEasing(t),s=this.parseDelay(t),o=this.parseSleep(t),u=this.parseRepeat(t),c=this.parseOffset(t),h=this.parseScale(t),l=this.parseScaleBase(t),f=this.parseParameters(),p=new S(t,e,i,a,s,o,c,u,h,l,f,n,r,null,this.input);return p},parseNumber:function(t,e,r,n,i,a,s){var o=p(this.input[s][t],this.oldOptions[n]),u=e(o),c=r(this.oldOptions[i],0),h=p(this.oldOptions[a],1);return 0===c&&1===h?o:(u+c)*h},parseParameters:function(){return f({},this.input.parameters,this.oldOptions)},mergeEasing:function(t,e){return this.mergeFirst(t,e,Tr,"easing","easings")},mergeRepeat:function(t,e){return this.mergeNumber(t,e,hn,"repeat","repeatAdd","repeatScale","repeats")},mergeDelay:function(t,e){return this.mergeNumber(t,e,ln,"delay","delayAdd","delayScale","delays")},mergeSleep:function(t,e){return this.mergeNumber(t,e,ln,"sleep","sleepAdd","sleepScale","scales")},mergeDuration:function(t,e){return this.mergeNumber(t,e,ln,"duration","durationAdd","durationScale","durations")},mergeOffset:function(t,e){return this.mergeNumber(t,e,ln,"offset","offsetAdd","offsetScale","offsets")},mergeScale:function(t,e){return this.mergeNumber(t,e,Cr,"scale","scaleAdd","scaleScale","scales")},mergeScaleBase:function(t,e,r){var n=r.attribute(t).calculator,i=function(t,e){return n.parse(t,e)};return this.mergeFirst(t,e,i,"scaleBase","scaleBases")},mergeParameters:function(t){return f({},this.newOptions.parameters,t)},mergeFirst:function(t,e,r,n,i){var a=this.input[i][t],s=p(a,this.newOptions[n],this.oldOptions[n]);return r(s,e)},mergeNumber:function(t,e,r,n,i,a,s){var o=p(this.input[s][t],this.newOptions[n],this.oldOptions[n]),u=r(o,e),c=r(p(this.newOptions[i],this.oldOptions[i]),0),h=p(this.newOptions[a],this.oldOptions[a],1);return(u+c)*h}}),$r.define(M,{createConstants:function(){this.ZERO=this.create(),this.ONE=this.parse(1,this.ZERO),this.INFINITY=this.parse(Number.POSITIVE_INFINITY,this.ZERO)},parse:function(){throw"Calculator.parse not implemented"},parseArray:function(t,e,r){t.length!==e.length&&(e.length=t.length);for(var n=this.parse(r,this.ZERO),i=0;i<t.length;i++)e[i]=this.parse(t[i],n);return e},copy:function(){throw"Calculator.copy not implemented"},zero:function(){throw"Calculator.zero not implemented"},convert:function(){throw"Calculator.convert not implemented"},clone:function(t){return this.copy(this.create(),t)},create:function(){throw"Calculator.create not implemented"},scale:function(t,e){return this.adds(t,t,e-1)},add:function(t,e){return this.adds(t,e,1)},adds:function(){throw"Calculator.adds not implemented"},sub:function(t,e){return this.adds(t,e,-1)},mul:function(){throw"Calculator.mul not implemented"},div:function(){throw"Calculator.div not implemented"},interpolate:function(t,e,r,n){return t=this.zero(t),t=this.adds(t,e,1-n),t=this.adds(t,r,n)},random:function(t,e,r){return this.interpolate(t,e,r,Math.random())},distance:function(t,e){return Math.sqrt(this.distanceSq(t,e))},distanceSq:function(){throw"Calculator.distanceSq not implemented"},length:function(t){return this.distance(t,this.ZERO)},lengthSq:function(t){return this.distanceSq(t,this.ZERO)},isValid:function(){throw"Calculator.isValid not implemented"},isNaN:function(){throw"Calculator.isNaN not implemented"},isZero:function(){throw"Calculator.isZero not implemented"},isEqual:function(){throw"Calculator.isEqual not implemented"},min:function(){throw"Calculator.min not implemented"},max:function(){throw"Calculator.max not implemented"},dot:function(){throw"Calculator.dot not implemented"},clamp:function(t,e,r){var n=this.distanceSq(t,this.ZERO);return e*e>n?this.scale(t,e/Math.sqrt(n)):n>r*r?this.scale(t,r/Math.sqrt(n)):t},setLength:function(t,e){var r=this.lengthSq(t);return 0!==r?this.scale(t,e/Math.sqrt(r)):t}}),$r.define(T,{$reset:function(t,e,r,n,i){this.$eventable=t,this.$previous=e,this.$eventType=r,this.$event=n,this.$callback=i,this.$calls=[],this.$next=[],this.$isRoot()&&this.$register()},$isRoot:function(){return this.$eventable===this.$previous},$register:function(){this.$eventable[this.$eventType](this.$event,this.$run,this)},$push:function(t){return function(){return this.$calls.push([t,arguments]),this}},$run:function(){n(this.$callback)&&this.$callback.call(this.$eventable,this);for(var t=0;t<this.$calls.length;t++){var e=this.$calls[t];this.$eventable[e[0]].apply(this.$eventable,e[1])}for(var r=0;r<this.$next.length;r++)this.$next[r].$register()},undefer:function(){return this.$previous},defer:function(t,e,r){var n=new this.$factory(this.$eventable,this,t,e,r);return this.$next.push(n),n}}),I.prototype=new T(I,["restore","placeAttrimator","applyInitialState","preupdate","update","apply","trimAttrimators","activate","deactivate","destroy","spring","play","playAttrimators","queue","queueAttrimators","insert","insertAttrimators","transition","transitionAttrimators","tween","tweenTo","tweenMany","tweenManyTo","tweenFrom","tweenManyFrom","move","moveMany","follow","stop","end","finish","nopeat","pause","resume","set","unset","get","invoke","onCycleStart","onCycleEnd"]);var Lr={};Lr["in"]=function(t){return function(e){return t(e)}},Lr.out=function(t){return function(e){return 1-t(1-e)}},Lr.inout=function(t){return function(e){return.5>e?.5*t(2*e):1-.5*t(2-2*e)}},Lr.yoyo=function(t){return function(e){return t(.5>e?2*e:2-2*e)}},Lr.mirror=function(t){return function(e){return.5>e?t(2*e):1-t(2-2*e)}},Lr.reverse=function(t){return function(e){return t(1-e)}},Lr.flip=function(t){return function(e){return 1-t(e)}};var Zr={};Zr.linear=function(t){return t},Zr.quad=function(t){return t*t},Zr.ease=function(t){var e=1-t,r=e*e,n=t*t,i=.3*r*t+3*e*n+n*t,a=1-r*r;return i*e+a*t},Zr.cubic=function(t){return t*t*t},Zr.quartic=function(t){var e=t*t;return e*e},Zr.quintic=function(t){var e=t*t;return e*e*t},Zr.back=function(t){var e=t*t,r=e*t;return r+e-t},Zr.sine=function(t){return Math.sin(1.57079632679*t)},Zr.overshot=function(t){return(1-.7*t)*t*(10/3)},Zr.elastic=function(t){var e=t*t,r=e*t,n=e*(2*r+e-4*t+2),i=-Math.sin(10.9955742876*t);return n*i},Zr.revisit=function(t){return Math.abs(t-Math.sin(3.14159265359*t))},Zr.lasso=function(t){return 1-Math.cos(t*t*t*36)*(1-t)},Zr.slowbounce=function(t){var e=t*t;return 1-Math.abs((1-e)*Math.cos(e*t*14.8044066016))},Zr.bounce=function(t){return 1-Math.abs((1-t)*Math.cos(t*t*14.8044066016))},Zr.smallbounce=function(t){var e=1-t;return 1-Math.abs(e*e*Math.cos(t*t*14.8044066016))},Zr.tinybounce=function(t){var e=1-t;return 1-Math.abs(e*e*Math.cos(t*t*7))},Zr.hesitant=function(t){return Math.cos(t*t*12)*t*(1-t)+t},Zr.sqrt=function(t){return Math.sqrt(t)},Zr.sqrtf=function(t){var e=1-t,r=e*e;return.5*(1-r*r+t)},Zr.log10=function(t){return.5*(Math.log10(t+.01)+2)/1.0021606868913213},Zr.slingshot=function(t){if(.7>t)return t*-.357;var e=t-.7;return.5*(e*e*27.5-.5)},Zr.circular=function(t){return 1-Math.sqrt(1-t*t)},Zr.gentle=function(t){return 3*(1-t)*t*t+t*t*t},Zr.scale=function(t,e){var r=Tr(e);return function(e){var n=r(e);return t*n+(1-t)*e}},Zr.bezier=function(t,e,r,n){function i(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function s(t){return 3*t}function o(t,e,r){return((i(e,r)*t+a(e,r))*t+s(e))*t}function u(t,e,r){return 3*i(e,r)*t*t+2*a(e,r)*t+s(e)}function c(e){for(var n=e,i=0;4>i;++i){var a=u(n,t,r);if(0===a)return n;var s=o(n,t,r)-e;n-=s/a}return n}return function(t){return o(c(t),e,n)}};var Gr={DELAYED:1,ANIMATING:2,SLEEPING:4,FINISHED:8};$r.extend(S,b,{computeValue:function(t,e){var r=this.path.compute(t,this.easing(e));if(r!==!1&&1!==this.scale){var n=this.path.calculator,t=n.clone(this.scaleBase),i=n.sub(t,r);r=n.adds(r,i,-this.scale)}return r},applyValue:function(t,e,r){var n=e;return this.path.calculator.isValid(e)||(n=this.path.calculator.create()),n=this.computeValue(n,r),n!==!1&&(t[this.attribute]=n),n},nopeat:function(){var t=de(Math.ceil((this.elapsed-this.delay)/(this.duration+this.sleep)),0,this.repeat);return t!==this.repeat&&(this.repeat=t,this.prestartNext(!0)),this},finish:function(t){this.applyValue(t,this.path.calculator.create(),1),this.state=Gr.FINISHED},start:function(t,e){this.prestart(t),this.state=this.delay?Gr.DELAYED:Gr.ANIMATING,this.hasComputed()&&(this.path=this.path.replaceComputed(this,e))},startCycle:function(t){return this.hasInitialState?(this.applyValue(t,t[this.attribute],0),!0):!1},update:function(t,e){var r=!1,n=this.delay,i=this.duration,a=this.sleep,s=this.repeat,o=this.state,u=this.state,c=0;t-=n;var h=i+a,l=Math.floor(t/h);return l>=s?(u=Gr.FINISHED,c=1):(t-=l*h,t>i?(u=Gr.SLEEPING,c=1):(u=Gr.ANIMATING,c=t/i)),(u===Gr.ANIMATING||u!==Gr.ANIMATING&&o===Gr.ANIMATING)&&(this.applyValue(e,e[this.attribute],c),r=!0),this.state=u,r},valueAt:function(t,e){if(t+=this.offset,t<this.delay&&!this.hasInitialState)return!1;var r=0;if(t>=this.delay){var n=this.duration+this.sleep,i=t-this.delay,a=Math.floor(i/n);r=a>=this.repeat?1:Math.min(1,i%n/this.duration)}return this.computeValue(e,r)},totalTime:function(){var t=this.sleep?(this.repeat-1)*this.sleep:0,e=this.repeat*this.duration;return Math.min(this.stopTime,this.delay+e+t-this.offset)},clone:function(){return new S(this.attribute,this.path,this.duration,this.easing,this.delay,this.sleep,this.offset,this.repeat,this.scale,this.scaleBase,this.parameters,this.hasInitialState,this.builder,this.next?this.next.clone():null,this.input)},hasComputed:function(){return this.path.computed},isInfinite:function(){return!isFinite(this.repeat)&&!isFinite(this.stopTime)},isFinished:function(){return this.state===Gr.FINISHED}}),S.fromOptions=function(t,e,r){return new S(t,e,r.duration,r.easing,r.delay,r.sleep,r.offset,r.repeat,r.scale,r.scaleBase,r.parameters)},$r.define(N,{is:function(){throw"Factory.is not implemented"},animatorFor:function(){throw"Factory.animatorFor not implemented"},animatorsFor:function(t,e){e.push(this.animatorFor(t))},destroy:function(){},attribute:function(){throw"Factory.attribute not implemented"}}),$r.define(C,{reset:function(){return this.values=[],this.keys=[],this.indices={},this},put:function(t,e){return t in this.indices?this.values[this.indices[t]]=e:(this.indices[t]=this.values.length,this.values.push(e),this.keys.push(t)),this},rekey:function(t,e){if(t in this.indices){var r=this.indices[t];this.keys[r]=e,this.indices[e]=r,delete this.indices[t]}return this},putMap:function(t){for(var e=t.keys,r=t.values,n=0;n<e.length;n++)this.put(e[n],r[n]);return this},get:function(t){return this.values[this.indices[t]]},remove:function(t){var e=this.indices[t];return i(e)&&this.removeAt(e),this},removeAt:function(t){var e=this.keys[t],r=this.values.pop(),n=this.keys.pop();return t<this.values.length&&(this.values[t]=r,this.keys[t]=n,this.indices[n]=t),delete this.indices[e],this},indexOf:function(t){return p(this.indices[t],-1)},has:function(t){return t in this.indices},hasOverlap:function(t){for(var e=this.keys,r=t.indices,n=0;n<e.length;n++)if(e[n]in r)return!0;return!1},size:function(){return this.values.length},clear:function(){return this.values.length=0,this.keys.length=0,this.indices={},this}}),$r.extend(z,b,{getValue:function(){return n(this.value)?this.value():this.value},finish:function(t){var e=!this.applied;return e&&(t[this.attribute]=this.getValue(),this.applied=!0),e},start:function(t,e){this.prestart(t),this.value=e.getAttribute(this.attribute).parse(this.value),K(this.value)&&(this.value=this.value(this,e)),this.applied=!1},startCycle:function(t){return this.hasInitialState&&this.finish(t)},update:function(t,e){return t>=this.delay&&this.finish(e)},valueAt:function(t){return t<this.delay?!1:this.getValue()},totalTime:function(){return Math.min(this.stopTime,this.delay)},clone:function(){return new z(this.attribute,this.value,this.delay,this.hasInitialState,this.builder,this.next?this.next.clone():null)},hasComputed:function(){return K(this.value)},isInfinite:function(){return!1},isFinished:function(){return this.applied}}),$r.define(O,{reset:function(t,e){this.calculator=xr(t),this.points=e,this.computed=this.hasComputed(),this.deterministic=this.isDeterministic()},compute:function(){throw"Path.compute not implemented"},hasComputed:function(){return this.examinePoints(K,!0,!1)},isDeterministic:function(){return this.examinePoints(n,!1,!0)},examinePoints:function(t,e,r){for(var n=this.points,i=0;i<n.length;i++)if(t(n[i]))return e;return r},replaceComputed:function(t,e){for(var r=this.copy(),n=r.points,i=0;i<n.length;i++)K(n[i])&&(n[i]=n[i](t,e));return r},resolvePoint:function(t){return d(this.points[t],arguments)},isLinear:function(){return!0},length:function(t){var e=0,r=this.calculator;if(this.isLinear())for(var n=this.resolvePoint(0,0),i=this.points.length-1,a=1;i>=a;a++){var s=this.resolvePoint(a,a/i);e+=r.distance(n,s),n=s}else for(var o=1/t,u=o,n=r.clone(this.resolvePoint(0,0)),c=r.create(),a=1;t>=a;a++){var s=this.compute(c,u);e+=r.distance(n,s),u+=o,c=n,n=s}return e}}),$r.extend(P,b,{parseValue:function(t,e,r){var n=this.calculator.parse(e,r);return K(n)&&(n=n(this,t)),n},resolveVelocity:function(){return d(this.velocity)},resolveAcceleration:function(){return d(this.acceleration)},start:function(t,e){this.prestart(t);var r=e.getAttribute(this.attribute),n=xr(p(this.calculator,r.calculator));this.calculator=n,this.position=this.parseValue(e,this.position,r.defaultValue),this.initalPosition=n.clone(this.position),this.velocity=this.parseValue(e,this.velocity,n.ZERO),this.acceleration=this.parseValue(e,this.acceleration,n.ZERO),this.temp=n.create()},hasComputed:function(){return K(this.position)||K(this.velocity)||K(this.acceleration)},update:function(t,e){var r=this.valueAt(t,this.temp,!0);if(r!==!1)return e[this.attribute]=this.position=r,!0;var i=this.calculator,a=Math.min(.001*(t-this.elapsed),P.MAX_DT),s=i.copy(this.temp,this.resolveVelocity()),o=this.resolveAcceleration(),u=this.position;return s=i.adds(s,o,a),isFinite(this.terminal)&&(s=i.clamp(s,0,this.terminal)),u=i.adds(u,s,a),this.position=u,n(this.velocity)||(this.velocity=i.copy(this.velocity,s)),e[this.attribute]=u,!0},valueAt:function(t,e,r){if(n(this.velocity)||n(this.acceleration)||this.terminal!==Number.POSITIVE_INFINITY)return!1;t-=this.delay,t*=.001;var i=this.calculator,a=r?i.copy(this.position,this.initalPosition):i.copy(e,this.initalPosition);return a=i.adds(a,this.velocity,t),a=i.adds(a,this.acceleration,t*t)},clone:function(){return new P(this.attribute,this.builder,this.calculator,this.position,this.velocity,this.acceleration,this.terminal,this.stopTime)},finish:function(){return this.finished=!0,!0},isFinished:function(){return this.finished}}),P.MAX_DT=.1,$r.define(E,{maxDelay:function(){return this.delay*(this.animators.length()-1)},createAttrimators:function(t,e){for(var r=t.clone(),n=r.values,i=e/(this.animators.length()-1),a=this.easing(i)*this.maxDelay(),s=n.length-1;s>=0;s--)n[s].delay+=a;return r},reverse:function(){return this.animators.reverse(),this},play:function(t,e,r,n){var i=yr(t,e,n,this),a=this;return this.animators.each(function(t,e){var n=a.createAttrimators(i,e);t.newCycle(n),t.playAttrimators(n,r)}),this.add()},queue:function(t,e,r){var n=yr(t,e,r,this),i=this,a=0,s=[];return this.animators.each(function(t,e){s[e]=t.timeRemaining(),a=Math.max(a,s[e])}),this.animators.each(function(t,e){for(var r=a-s[e],o=i.createAttrimators(n,e),u=o.values,c=u.length-1;c>=0;c--)u[c].delay+=r;t.newCycle(o),t.queueAttrimators(o)}),this.add()},insert:function(t,e,r){var n=yr(t,e,r,this),i=this;return this.animators.each(function(t,e){var r=i.createAttrimators(n,e);t.newCycle(r),t.insertAttrimators(r)}),this.add()},transition:function(t,e,r,n,i){var t=Rr(t),a=yr(e,r,i,this),s=this;return this.animators.each(function(e,r){var i=s.createAttrimators(a,r);e.newCycle(i),e.transitionAttrimators(t,i,n)}),this.add()},add:function(){return this.animators.activate(),this}}),$r.extend(q,b,{set:function(t,e,r,n,i,a,s){this.reset(t,null,null),this.calculator=e,this.rest=r,this.position=n,this.gravity=a,this.velocity=i,this.finishOnRest=s},resolveRest:function(){return d(this.rest)},updateVelocity:function(){throw"Spring.updateVelocity not implemented"},start:function(t,e){this.prestart(t);var r=e.getAttribute(this.attribute),n=xr(p(this.calculator,r.calculator));this.calculator=n,this.rest=this.parseValue(e,this.rest,r.defaultValue),this.position=this.parseValue(e,this.position,r.defaultValue),this.gravity=this.parseValue(e,this.gravity,n.ZERO),this.velocity=this.parseValue(e,this.velocity,n.ZERO)},hasComputed:function(){return K(this.rest)||K(this.position)||K(this.gravity)||K(this.velocity)},update:function(t,e){var r=this.calculator,n=Math.min(.001*(t-this.elapsed),q.MAX_DT),i=r.clone(this.position);this.updateVelocity(n),this.velocity=r.adds(this.velocity,this.gravity,n),this.position=r.adds(this.position,this.velocity,n);var a=!r.isEqual(i,this.position,q.EPSILON);return a?e[this.attribute]=this.position:this.finishOnRest&&r.isZero(this.velocity)&&(this.finished=!0),a},finish:function(){return this.finished=!0,!0},isFinished:function(){return this.finished}}),q.MAX_DT=.1,q.EPSILON=1e-4,ie(F);var _r=!1,Yr=!1,Ur=new y,Xr=function(){for(var e=["ms","moz","webkit","o"],r=t.requestAnimationFrame,n=0;n<e.length&&!r;++n)r=t[e[n]+"RequestAnimationFrame"];if(!r){var i=0;return function(e){var r=jr(),n=Math.max(kr.pauseTime,kr.frameRate-(r-i)),a=t.setTimeout(function(){e(r+n)},n);return i=r+n,a}}return function(t){r(t)}}();X.parsers=[{parse:function(t){if("object"==typeof t){var e={r:this.parseComponent(t.r,parseInt,255),g:this.parseComponent(t.g,parseInt,255),b:this.parseComponent(t.b,parseInt,255),a:this.parseComponent(t.a,parseFloat,1)};return e}return!1},parseComponent:function(t,e,r){var n=typeof t,i=r;if("string"===n){var a=e(n,10);isNaN(a)||(i=a)}else"number"===n&&(i=t);return i>r&&(i=r),0>i&&(i=0),i}},{names:{transparent:{r:255,g:255,b:255,a:0},aliceblue:{r:240,g:248,b:255,a:1},antiquewhite:{r:250,g:235,b:215,a:1},aqua:{r:0,g:255,b:255,a:1},aquamarine:{r:127,g:255,b:212,a:1},azure:{r:240,g:255,b:255,a:1},beige:{r:245,g:245,b:220,a:1},bisque:{r:255,g:228,b:196,a:1},black:{r:0,g:0,b:0,a:1},blanchedalmond:{r:255,g:235,b:205,a:1},blue:{r:0,g:0,b:255,a:1},blueviolet:{r:138,g:43,b:226,a:1},brown:{r:165,g:42,b:42,a:1},burlywood:{r:222,g:184,b:135,a:1},cadetblue:{r:95,g:158,b:160,a:1},chartreuse:{r:127,g:255,b:0,a:1},chocolate:{r:210,g:105,b:30,a:1},coral:{r:255,g:127,b:80,a:1},cornflowerblue:{r:100,g:149,b:237,a:1},cornsilk:{r:255,g:248,b:220,a:1},crimson:{r:220,g:20,b:60,a:1},cyan:{r:0,g:255,b:255,a:1},darkblue:{r:0,g:0,b:139,a:1},darkcyan:{r:0,g:139,b:139,a:1},darkgoldenrod:{r:184,g:134,b:11,a:1},darkgray:{r:169,g:169,b:169,a:1},darkgreen:{r:0,g:100,b:0,a:1},darkkhaki:{r:189,g:183,b:107,a:1},darkmagenta:{r:139,g:0,b:139,a:1},darkolivegreen:{r:85,g:107,b:47,a:1},darkorange:{r:255,g:140,b:0,a:1},darkorchid:{r:153,g:50,b:204,a:1},darkred:{r:139,g:0,b:0,a:1},darksalmon:{r:233,g:150,b:122,a:1},darkseagreen:{r:143,g:188,b:143,a:1},darkslateblue:{r:72,g:61,b:139,a:1},darkslategray:{r:47,g:79,b:79,a:1},darkturquoise:{r:0,g:206,b:209,a:1},darkviolet:{r:148,g:0,b:211,a:1},deeppink:{r:255,g:20,b:147,a:1},deepskyblue:{r:0,g:191,b:255,a:1},dimgray:{r:105,g:105,b:105,a:1},dodgerblue:{r:30,g:144,b:255,a:1},feldspar:{r:209,g:146,b:117,a:1},firebrick:{r:178,g:34,b:34,a:1},floralwhite:{r:255,g:250,b:240,a:1},forestgreen:{r:34,g:139,b:34,a:1},fuchsia:{r:255,g:0,b:255,a:1},gainsboro:{r:220,g:220,b:220,a:1},ghostwhite:{r:248,g:248,b:255,a:1},gold:{r:255,g:215,b:0,a:1},goldenrod:{r:218,g:165,b:32,a:1},gray:{r:128,g:128,b:128,a:1},green:{r:0,g:128,b:0,a:1},greenyellow:{r:173,g:255,b:47,a:1},honeydew:{r:240,g:255,b:240,a:1},hotpink:{r:255,g:105,b:180,a:1},indianred:{r:205,g:92,b:92,a:1},indigo:{r:75,g:0,b:130,a:1},ivory:{r:255,g:255,b:240,a:1},khaki:{r:240,g:230,b:140,a:1},lavender:{r:230,g:230,b:250,a:1},lavenderblush:{r:255,g:240,b:245,a:1},lawngreen:{r:124,g:252,b:0,a:1},lemonchiffon:{r:255,g:250,b:205,a:1},lightblue:{r:173,g:216,b:230,a:1},lightcoral:{r:240,g:128,b:128,a:1},lightcyan:{r:224,g:255,b:255,a:1},lightgoldenrodyellow:{r:250,g:250,b:210,a:1},lightgrey:{r:211,g:211,b:211,a:1},lightgreen:{r:144,g:238,b:144,a:1},lightpink:{r:255,g:182,b:193,a:1},lightsalmon:{r:255,g:160,b:122,a:1},lightseagreen:{r:32,g:178,b:170,a:1},lightskyblue:{r:135,g:206,b:250,a:1},lightslateblue:{r:132,g:112,b:255,a:1},lightslategray:{r:119,g:136,b:153,a:1},lightsteelblue:{r:176,g:196,b:222,a:1},lightyellow:{r:255,g:255,b:224,a:1},lime:{r:0,g:255,b:0,a:1},limegreen:{r:50,g:205,b:50,a:1},linen:{r:250,g:240,b:230,a:1},magenta:{r:255,g:0,b:255,a:1},maroon:{r:128,g:0,b:0,a:1},mediumaquamarine:{r:102,g:205,b:170,a:1},mediumblue:{r:0,g:0,b:205,a:1},mediumorchid:{r:186,g:85,b:211,a:1},mediumpurple:{r:147,g:112,b:216,a:1},mediumseagreen:{r:60,g:179,b:113,a:1},mediumslateblue:{r:123,g:104,b:238,a:1},mediumspringgreen:{r:0,g:250,b:154,a:1},mediumturquoise:{r:72,g:209,b:204,a:1},mediumvioletred:{r:199,g:21,b:133,a:1},midnightblue:{r:25,g:25,b:112,a:1},mintcream:{r:245,g:255,b:250,a:1},mistyrose:{r:255,g:228,b:225,a:1},moccasin:{r:255,g:228,b:181,a:1},navajowhite:{r:255,g:222,b:173,a:1},navy:{r:0,g:0,b:128,a:1},oldlace:{r:253,g:245,b:230,a:1},olive:{r:128,g:128,b:0,a:1},olivedrab:{r:107,g:142,b:35,a:1},orange:{r:255,g:165,b:0,a:1},orangered:{r:255,g:69,b:0,a:1},orchid:{r:218,g:112,b:214,a:1},palegoldenrod:{r:238,g:232,b:170,a:1},palegreen:{r:152,g:251,b:152,a:1},paleturquoise:{r:175,g:238,b:238,a:1},palevioletred:{r:216,g:112,b:147,a:1},papayawhip:{r:255,g:239,b:213,a:1},peachpuff:{r:255,g:218,b:185,a:1},peru:{r:205,g:133,b:63,a:1},pink:{r:255,g:192,b:203,a:1},plum:{r:221,g:160,b:221,a:1},powderblue:{r:176,g:224,b:230,a:1},purple:{r:128,g:0,b:128,a:1},red:{r:255,g:0,b:0,a:1},rosybrown:{r:188,g:143,b:143,a:1},royalblue:{r:65,g:105,b:225,a:1},saddlebrown:{r:139,g:69,b:19,a:1},salmon:{r:250,g:128,b:114,a:1},sandybrown:{r:244,g:164,b:96,a:1},seagreen:{r:46,g:139,b:87,a:1},seashell:{r:255,g:245,b:238,a:1},sienna:{r:160,g:82,b:45,a:1},silver:{r:192,g:192,b:192,a:1},skyblue:{r:135,g:206,b:235,a:1},slateblue:{r:106,g:90,b:205,a:1},slategray:{r:112,g:128,b:144,a:1},snow:{r:255,g:250,b:250,a:1},springgreen:{r:0,g:255,b:127,a:1},steelblue:{r:70,g:130,b:180,a:1},tan:{r:210,g:180,b:140,a:1},teal:{r:0,g:128,b:128,a:1},thistle:{r:216,g:191,b:216,a:1},tomato:{r:255,g:99,b:71,a:1},turquoise:{r:64,g:224,b:208,a:1},violet:{r:238,g:130,b:238,a:1},violetred:{r:208,g:32,b:144,a:1},wheat:{r:245,g:222,b:179,a:1},white:{r:255,g:255,b:255,a:1},whitesmoke:{r:245,g:245,b:245,a:1},yellow:{r:255,g:255,b:0,a:1},yellowgreen:{r:154,g:205,b:50,a:1}},parse:function(t){if("string"==typeof t&&(t=t.toLowerCase(),t in this.names)){var e=this.names[t];return{r:e.r,g:e.g,b:e.b,a:e.a}}return!1}},{regex:/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i,parse:function(t){var e=this.regex.exec(t);return null!==e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}:!1}},{regex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,parse:function(t){var e=this.regex.exec(t);return null!==e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:1}:!1}},{regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,parse:function(t){var e=this.regex.exec(t);return null!==e?{r:Math.min(255,parseInt(e[1],10)),g:Math.min(255,parseInt(e[2],10)),b:Math.min(255,parseInt(e[3],10)),a:1}:!1}},{regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([01]?\.\d+|[01])\)$/i,parse:function(t){var e=this.regex.exec(t);return null!==e?{r:Math.min(255,parseInt(e[1],10)),g:Math.min(255,parseInt(e[2],10)),b:Math.min(255,parseInt(e[3],10)),a:Math.min(1,parseFloat(e[4]))}:!1}}],X.parse=function(t){for(var e=X.parsers,r=0;r<e.length;r++){var n=e[r].parse(t);if(n!==!1)return n}return!1},X.format=function(t){var e=de(p(t.a,1),0,1),r=Math.floor(de(p(t.r,255),0,255)),n=Math.floor(de(p(t.g,255),0,255)),i=Math.floor(de(p(t.b,255),0,255));if(1===e){var a=r.toString(16),s=n.toString(16),o=i.toString(16);return 1===a.length&&(a="0"+a),1===s.length&&(s="0"+s),1===o.length&&(o="0"+o),"#"+a+s+o}return"rgba("+r+","+n+","+i+","+e+")"},Q("current",function(t,e){var r=t.attribute,n=e.getAttribute(r);return r in e.frame?n.calculator.clone(e.frame[r]):n.cloneDefault()}),Q("relative",function(t,e){if(K(t))return t;var r=function(r,n){var i=r.attribute,a=n.getAttribute(i),s=a.calculator,o=null;return o=i in n.frame?s.clone(n.frame[i]):a.cloneDefault(),e&&(o=s.mul(o,e)),s.add(o,t)};return r.computed=!0,r.relativeAmount=t,r.mask=e,r}),Q("random",function(t){var e=null;if(o(t))e=function(e,r){var n=e.attribute,i=r.getAttribute(n),a=i.calculator,s=t[Math.floor(Math.random()*t.length)];return a.parse(s,a.ZERO)};else if(t instanceof O)e=function(e,r){var n=e.attribute,i=r.getAttribute(n),a=i.calculator;return t.compute(a.create(),Math.random())};else{if(!(u(t)&&r(t.min)&&r(t.max)))throw"Invalid random input: "+t;e=function(e,r){var n=e.attribute,i=r.getAttribute(n),a=i.calculator,s=d(t.min),o=d(t.max),u=a.parse(s,a.ZERO),c=a.parse(o,a.ZERO);return a.random(a.create(),u,c)}}return e.randomSelection=t,Q(e)}),Q("combined",function(t){var e=xr("number"),r=function(r,n){for(var i=n.getAttribute(r.attribute),a=[],s=0;s<t.length;s++)a.push(J(r,n,t[s],e));return i.parse(a)};return r.numbers=t,Q(r)});var Qr=180/Math.PI,Wr=Math.PI/180,Kr={add:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.add(a,s)};return Ae(this,e)},sub:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.sub(a,s)};return Ae(this,e)},mul:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.mul(a,s)};return Ae(this,e)},div:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.div(a,s)};return Ae(this,e)},scale:function(t){var e=xr("number"),r=function(r,n,i,a){var s=i(r,n),o=J(r,n,t,e);return a.scale(s,o)};return Ae(this,r)},adds:function(t,e){var r=xr("number"),n=function(n,i,a,s){var o=a(n,i),u=J(n,i,t,a.parseValue),c=J(n,i,e,r);return s.adds(o,u,c)};return Ae(this,n)},neg:function(){var t=function(t,e,r,n){var i=r(t,e);return n.scale(i,-1)};return Ae(this,t)},min:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.min(a,a,s)};return Ae(this,e)},max:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.max(a,a,s)};return Ae(this,e)},truncate:function(t){var e=xr("number"),r=function(r,n,i){var a=i(r,n),s=J(r,n,t,e);return Math.floor(a*s)/s};return Ae(this,r)},mod:function(t){var e=xr("number"),r=function(r,n,i,a){{var s=i(r,n);J(r,n,t,e)}return a.convert(s,be(t))};return Ae(this,r)},clamp:function(t,e){var r=xr("number"),n=function(n,i,a,s){var o=a(n,i),u=J(n,i,t,r),c=J(n,i,e,r);return s.convert(o,ge(u,c))};return Ae(this,n)},convert:function(t){var e=function(e,r,n,i){var a=n(e,r);return i.convert(a,t)};return Ae(this,e)},abs:function(){return this.convert(Math.abs)},sqrt:function(){return this.convert(Math.sqrt)},floor:function(){return this.convert(Math.floor)},ceil:function(){return this.convert(Math.ceil)},round:function(){return this.convert(Math.round)},toDegrees:function(){return this.convert(ve)},toRadians:function(){return this.convert(ye)},cos:function(){return this.convert(Math.cos)},sin:function(){return this.convert(Math.sin)},tan:function(){return this.convert(Math.tan)},cosDegrees:function(){return this.toRadians().cos()},sinDegrees:function(){return this.toRadians().sin()},tanDegrees:function(){return this.toRadians().tan()},distance:function(t){var e=function(e,r,n,i){var a=n(e,r),s=J(e,r,t,n.parseValue);return i.distance(a,s)};return Ae(this,e,"number")},property:function(t,e){var r=function(r,n,i){var a=i(r,n);return u(a)?a[t]:e};return Ae(this,r,"number")},vector:function(t){var e=p(t,"2d"),r=function(t,r,n){var i=n(t,r);switch(e){case"2d":return{x:Math.cos(i),y:Math.sin(i)};case"3d":var a=i.x,s=i.y;return{x:Math.cos(a)*Math.cos(s),y:Math.sin(a)*Math.cos(s),z:Math.sin(s)}}return i};return Ae(this,r,e)},vectorDegrees:function(t){return this.toRadians().vector(t)},relative:function(t){var e=function(e,r,n){var i=n(e,r);return Q.relative(i,t)(e,r)};return Ae(this,e)}},Jr={},tn={prefix:"",options:{},cache:!1,forObject:null};$r.extend(Se,M,{aliases:{left:0,right:100,middle:50,center:50,top:0,bottom:100},parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(i(t))return{x:t,y:t};o(t)&&(t={x:t[0],y:t[1]});var a=p(e,kr.calculator2d);if(u(t)){var c=p(t.x,a.x),h=p(t.y,a.y),l=Cr(c,!1),f=Cr(h,!1);if(l!==!1&&f!==!1){var m={x:l,y:f},d=W(c),g=W(h);if(!r&&(d||g)){var v={x:d?1:0,y:g?1:0};return Q.relative(m,v)}return m}}if(s(t)){if(!r&&W(t)){var l=Cr(t,!1);if(l!==!1)return Q.relative({x:l,y:l})}var y=t.split(/[\s,|]/);return{x:this.parseString(y[0],a.x),y:this.parseString(p(y[1],y[0]),a.y)}}return this.clone(a)},parseString:function(t,e){return t in this.aliases?this.aliases[t]:Cr(t,e)},copy:function(t,e){return t.x=e.x,t.y=e.y,t},create:function(){return{x:0,y:0}},zero:function(t){return t.x=0,t.y=0,t},convert:function(t,e){return t.x=e(t.x),t.y=e(t.y),t},adds:function(t,e,r){return t.x+=e.x*r,t.y+=e.y*r,t},mul:function(t,e){return t.x*=e.x,t.y*=e.y,t},div:function(t,e){return t.x=e.x?t.x/e.x:0,t.y=e.y?t.y/e.y:0,t},interpolate:function(t,e,r,n){return t.x=(r.x-e.x)*n+e.x,t.y=(r.y-e.y)*n+e.y,t},distanceSq:function(t,e){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},isValid:function(t){return"object"==typeof t&&"x"in t&&"y"in t},isNaN:function(t){return isNaN(t.x)||isNaN(t.y)},isZero:function(t,e){return Math.abs(t.x)<e&&Math.abs(t.y)<e},isEqual:function(t,e,r){return Math.abs(t.x-e.x)<r&&Math.abs(t.y-e.y)<r},min:function(t,e,r){return t.x=Math.min(e.x,r.x),t.y=Math.min(e.y,r.y),t},max:function(t,e,r){return t.x=Math.max(e.x,r.x),t.y=Math.max(e.y,r.y),t},dot:function(t,e){return t.x*e.x+t.y*e.y},random:function(t,e,r){return t.x=(r.x-e.x)*Math.random()+e.x,t.y=(r.y-e.y)*Math.random()+e.y,t
}}),$r.extend(Ne,M,{parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(i(t))return{x:t,y:t,z:t};o(t)&&(t={x:t[0],y:t[1],z:t[2]});var a=p(e,kr.calculator3d);if(u(t)){var c=p(t.x,a.x),h=p(t.y,a.y),l=p(t.z,a.z),f=Cr(c,!1),m=Cr(h,!1),d=Cr(l,!1);if(f!==!1&&m!==!1&&d!==!1){var g={x:f,y:m,z:d},v=W(c),y=W(h),b=W(l);if(!r&&(v||y||b)){var x={x:v?1:0,y:y?1:0,z:b?1:0};return Q.relative(g,x)}return g}}if(s(t)){if(!r&&W(t)){var f=Cr(t,!1);if(f!==!1)return Q.relative({x:f,y:f,z:f})}var w=t.split(/[\s,|]/);return{x:Cr(w[0],a.x),y:Cr(w[1],a.y),z:Cr(w[2],a.z)}}return this.clone(a)},copy:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t},create:function(){return{x:0,y:0,z:0}},zero:function(t){return t.x=0,t.y=0,t.z=0,t},convert:function(t,e){return t.x=e(t.x),t.y=e(t.y),t.z=e(t.z),t},adds:function(t,e,r){return t.x+=e.x*r,t.y+=e.y*r,t.z+=e.z*r,t},mul:function(t,e){return t.x*=e.x,t.y*=e.y,t.z*=e.z,t},div:function(t,e){return t.x=e.x?t.x/e.x:0,t.y=e.y?t.y/e.y:0,t.z=e.z?t.z/e.z:0,t},interpolate:function(t,e,r,n){return t.x=(r.x-e.x)*n+e.x,t.y=(r.y-e.y)*n+e.y,t.z=(r.z-e.z)*n+e.z,t},distanceSq:function(t,e){var r=t.x-e.x,n=t.y-e.y,i=t.z-e.z;return r*r+n*n+i*i},isValid:function(t){return"object"==typeof t&&"x"in t&&"y"in t&&"z"in t},isNaN:function(t){return isNaN(t.x)||isNaN(t.y)||isNaN(t.z)},isZero:function(t,e){return Math.abs(t.x)<e&&Math.abs(t.y)<e&&Math.abs(t.z)<e},isEqual:function(t,e,r){return Math.abs(t.x-e.x)<r&&Math.abs(t.y-e.y)<r&&Math.abs(t.z-e.z)<r},min:function(t,e,r){return t.x=Math.min(e.x,r.x),t.y=Math.min(e.y,r.y),t.z=Math.min(e.z,r.z),t},max:function(t,e,r){return t.x=Math.max(e.x,r.x),t.y=Math.max(e.y,r.y),t.z=Math.max(e.z,r.z),t},dot:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},random:function(t,e,r){return t.x=(r.x-e.x)*Math.random()+e.x,t.y=(r.y-e.y)*Math.random()+e.y,t.z=(r.z-e.z)*Math.random()+e.z,t}}),$r.extend(Ce,M,{parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(o(t)&&(t=t[0]),i(t))return t;if(s(t)){var a=Cr(t,!1);if(a!==!1)return!r&&W(t)?Q.relative(a):a}return Cr(e,kr.calculatorNumber)},copy:function(t,e){return e},create:function(){return 0},zero:function(){return 0},convert:function(t,e){return e(t)},adds:function(t,e,r){return t+=e*r},mul:function(t,e){return t*=e},div:function(t,e){return e?t/e:0},interpolate:function(t,e,r,n){return(r-e)*n+e},distanceSq:function(t,e){var r=t-e;return r*r},distance:function(t,e){return Math.abs(t-e)},length:function(t){return Math.abs(t)},lengthSq:function(t){return t*t},isValid:function(t){return"number"==typeof t},isNaN:function(t){return isNaN(t)},isZero:function(t,e){return Math.abs(t)<e},isEqual:function(t,e,r){return Math.abs(t-e)<r},min:function(t,e,r){return Math.min(e,r)},max:function(t,e,r){return Math.max(e,r)},dot:function(t,e){return t*e}}),$r.extend(ze,M,{parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(i(t))return{x:0,y:0,z:1,angle:t};o(t)&&(t={x:t[0],y:t[1],z:t[2],angle:t[3]});var a=p(e,kr.calculatorQuaternion);if(u(t)){var c=p(t.x,a.x),h=p(t.y,a.y),l=p(t.z,a.z),f=p(t.angle,a.angle),m=Cr(c,!1),d=Cr(h,!1),g=Cr(l,!1),v=Cr(f,!1);if(m!==!1&&d!==!1&&g!==!1&&v!==!1){var y={x:m,y:d,z:g,angle:v},b=W(c),x=W(h),w=W(l),A=W(f);if(!r&&(b||x||w||A)){return Q.relative(y)}return y}}if(s(t)){if(W(t)){var m=Cr(t,!1);if(!r&&m!==!1)return Q.relative({x:0,y:0,z:1,angle:m},{x:0,y:0,z:0,angle:1})}var M=t.split(/[\s,|]/);return{x:Cr(M[0],a.x),y:Cr(M[1],a.y),z:Cr(M[2],a.z),angle:Cr(M[3],a.angle)}}return this.clone(a)},copy:function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.angle=e.angle,t},create:function(){return{x:0,y:0,z:0,angle:0}},zero:function(t){return t.x=0,t.y=0,t.z=0,t.angle=0,t},convert:function(t,e){return t.x=e(t.x),t.y=e(t.y),t.z=e(t.z),t.angle=e(t.angle),t},adds:function(t,e,r){return t.x+=e.x*r,t.y+=e.y*r,t.z+=e.z*r,t.angle+=e.angle*r,t},mul:function(t,e){return t.x*=e.x,t.y*=e.y,t.z*=e.z,t.angle*=e.angle,t},div:function(t,e){return t.x=e.x?t.x/e.x:0,t.y=e.y?t.y/e.y:0,t.z=e.z?t.z/e.z:0,t.angle=e.angle?t.angle/e.angle:0,t},interpolate:function(t,e,r,n){return t.x=(r.x-e.x)*n+e.x,t.y=(r.y-e.y)*n+e.y,t.z=(r.z-e.z)*n+e.z,t.angle=(r.angle-e.angle)*n+e.angle,t},distanceSq:function(t,e){var r=t.x-e.x,n=t.y-e.y,i=t.z-e.z,a=t.angle-e.angle;return r*r+n*n+i*i+a*a},isValid:function(t){return"object"==typeof t&&"x"in t&&"y"in t&&"z"in t&&"angle"in t},isNaN:function(t){return isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.angle)},isZero:function(t,e){return Math.abs(t.x)<e&&Math.abs(t.y)<e&&Math.abs(t.z)<e&&Math.abs(t.angle)<e},isEqual:function(t,e,r){return Math.abs(t.x-e.x)<r&&Math.abs(t.y-e.y)<r&&Math.abs(t.z-e.z)<r&&Math.abs(t.angle-e.angle)<r},min:function(t,e,r){return t.x=Math.min(e.x,r.x),t.y=Math.min(e.y,r.y),t.z=Math.min(e.z,r.z),t.angle=Math.min(e.angle,r.angle),t},max:function(t,e,r){return t.x=Math.max(e.x,r.x),t.y=Math.max(e.y,r.y),t.z=Math.max(e.z,r.z),t.angle=Math.max(e.angle,r.angle),t},dot:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.angle*e.angle},random:function(t,e,r){return t.x=(r.x-e.x)*Math.random()+e.x,t.y=(r.y-e.y)*Math.random()+e.y,t.z=(r.z-e.z)*Math.random()+e.z,t.angle=(r.angle-e.angle)*Math.random()+e.angle,t}}),$r.extend(Oe,M,{parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(i(t))return{r:t,g:t,b:t};o(t)&&(t={r:t[0],g:t[1],b:t[2]});var a=p(e,kr.calculatorRGB);if(u(t)){var c=p(t.r,a.r),h=p(t.g,a.g),l=p(t.b,a.b),f=Cr(c,!1),m=Cr(h,!1),d=Cr(l,!1);if(f!==!1&&m!==!1&&d!==!1){var g={r:f,g:m,b:d},v=W(c),y=W(h),b=W(l);if(!r&&(v||y||b)){var x={r:v?1:0,g:y?1:0,b:b?1:0};return Q.relative(g,x)}return g}}var g=X.parse(t);if(g!==!1)return g;if(s(t)){if(W(t)){var w=Cr(t,!1);if(!r&&w!==!1)return Q.relative({r:w,g:w,b:w})}var A=t.split(/[\s,|]/);return{r:Cr(A[0],a.r),g:Cr(A[1],a.g),b:Cr(A[2],a.b)}}return this.clone(a)},copy:function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t},create:function(){return{r:0,g:0,b:0}},zero:function(t){return t.r=0,t.g=0,t.b=0,t},convert:function(t,e){return t.r=e(t.r),t.g=e(t.g),t.b=e(t.b),t},adds:function(t,e,r){return t.r+=e.r*r,t.g+=e.g*r,t.b+=e.b*r,t},mul:function(t,e){return t.r*=e.r,t.g*=e.g,t.b*=e.b,t},div:function(t,e){return t.r=e.r?t.r/e.r:0,t.g=e.g?t.g/e.g:0,t.b=e.b?t.b/e.b:0,t},interpolate:function(t,e,r,n){return t.r=(r.r-e.r)*n+e.r,t.g=(r.g-e.g)*n+e.g,t.b=(r.b-e.b)*n+e.b,t},distanceSq:function(t,e){var r=t.r-e.r,n=t.g-e.g,i=t.b-e.b;return r*r+n*n+i*i},isValid:function(t){return u(t)&&"r"in t&&"g"in t&&"b"in t},isNaN:function(t){return isNaN(t.r)||isNaN(t.g)||isNaN(t.b)},isZero:function(t,e){return Math.abs(t.r)<e&&Math.abs(t.g)<e&&Math.abs(t.b)<e},isEqual:function(t,e,r){return Math.abs(t.r-e.r)<r&&Math.abs(t.g-e.g)<r&&Math.abs(t.b-e.b)<r},min:function(t,e,r){return t.r=Math.min(e.r,r.r),t.g=Math.min(e.g,r.g),t.b=Math.min(e.b,r.b),t},max:function(t,e,r){return t.r=Math.max(e.r,r.r),t.g=Math.max(e.g,r.g),t.b=Math.max(e.b,r.b),t},dot:function(t,e){return t.r*e.r+t.g*e.g+t.b*e.b},random:function(t,e,r){return t.r=(r.r-e.r)*Math.random()+e.r,t.g=(r.g-e.g)*Math.random()+e.g,t.b=(r.b-e.b)*Math.random()+e.b,t}}),$r.extend(Pe,M,{parse:function(t,e,r){if(n(t))return t;if(t===!0)return Q.current;if(i(t))return{r:t,g:t,b:t,a:1};o(t)&&(t={r:t[0],g:t[1],b:t[2],a:t[3]});var a=p(e,kr.calculatorRGBA);if(u(t)){var c=p(t.r,a.r),h=p(t.g,a.g),l=p(t.b,a.b),f=p(t.a,a.a),m=Cr(c,!1),d=Cr(h,!1),g=Cr(l,!1),v=Cr(f,!1);if(m!==!1&&d!==!1&&g!==!1&&v!==!1){var y={r:m,g:d,b:g,a:v},b=W(c),x=W(h),w=W(l),A=W(f);if(!r&&(b||x||w||A)){var M={r:b?1:0,g:x?1:0,b:w?1:0,a:A?1:0};return Q.relative(y,M)}return y}}var y=X.parse(t);if(y!==!1)return y;if(s(t)){if(W(t)){var T=Cr(t,!1);if(!r&&T!==!1)return Q.relative({r:T,g:T,b:T,a:0})}var I=t.split(/[\s,|]/);return{r:Cr(I[0],a.r),g:Cr(I[1],a.g),b:Cr(I[2],a.b),a:Cr(I[3],a.a)}}return this.clone(a)},copy:function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t},create:function(){return{r:0,g:0,b:0,a:0}},zero:function(t){return t.r=0,t.g=0,t.b=0,t.a=0,t},convert:function(t,e){return t.r=e(t.r),t.g=e(t.g),t.b=e(t.b),t.a=e(t.a),t},adds:function(t,e,r){return t.r+=e.r*r,t.g+=e.g*r,t.b+=e.b*r,t.a+=e.a*r,t},mul:function(t,e){return t.r*=e.r,t.g*=e.g,t.b*=e.b,t.a*=e.a,t},div:function(t,e){return t.r=e.r?t.r/e.r:0,t.g=e.g?t.g/e.g:0,t.b=e.b?t.b/e.b:0,t.a=e.a?t.a/e.a:0,t},interpolate:function(t,e,r,n){return t.r=(r.r-e.r)*n+e.r,t.g=(r.g-e.g)*n+e.g,t.b=(r.b-e.b)*n+e.b,t.a=(r.a-e.a)*n+e.a,t},distanceSq:function(t,e){var r=t.r-e.r,n=t.g-e.g,i=t.b-e.b,a=t.a-e.a;return r*r+n*n+i*i+a*a},isValid:function(t){return u(t)&&"r"in t&&"g"in t&&"b"in t&&"a"in t},isNaN:function(t){return isNaN(t.r)||isNaN(t.g)||isNaN(t.b)||isNaN(t.a)},isZero:function(t,e){return Math.abs(t.r)<e&&Math.abs(t.g)<e&&Math.abs(t.b)<e&&Math.abs(t.a)<e},isEqual:function(t,e,r){return Math.abs(t.r-e.r)<r&&Math.abs(t.g-e.g)<r&&Math.abs(t.b-e.b)<r&&Math.abs(t.a-e.a)<r},min:function(t,e,r){return t.r=Math.min(e.r,r.r),t.g=Math.min(e.g,r.g),t.b=Math.min(e.b,r.b),t.a=Math.min(e.a,r.a),t},max:function(t,e,r){return t.r=Math.max(e.r,r.r),t.g=Math.max(e.g,r.g),t.b=Math.max(e.b,r.b),t.a=Math.max(e.a,r.a),t},dot:function(t,e){return t.r*e.r+t.g*e.g+t.b*e.b+t.a*e.a},random:function(t,e,r){return t.r=(r.r-e.r)*Math.random()+e.r,t.g=(r.g-e.g)*Math.random()+e.g,t.b=(r.b-e.b)*Math.random()+e.b,t.a=(r.a-e.a)*Math.random()+e.a,t}}),$r.extend(Ee,M,{parse:function(t,e){return n(t)?t:t===!0?Q.current:(o(t)&&(t=t[0]),s(t)?t:p(e,kr.calculatorString))},copy:function(t,e){return e},create:function(){return""},zero:function(){return""},convert:function(t,e){return e(t)},adds:function(t,e){return e},mul:function(t,e){return e},div:function(t){return t},interpolate:function(t,e,r,n){return.5>n?e:r},distanceSq:function(t,e){var r=Math.abs(t.length-e.length);return r*r},distance:function(t,e){return Math.abs(t.length-e.length)},length:function(t){return t.length},lengthSq:function(t){return t.length*t.length},isValid:function(t){return"string"==typeof t},isNaN:function(){return!1},isZero:function(t,e){return t.length<=e},isEqual:function(t,e){return t===e},min:function(t,e,r){return r>e?e:r},max:function(t,e,r){return e>r?e:r},dot:function(t,e){return t.length*e.length}}),$r.extend(qe,N,{is:function(t){return u(t)&&!o(t)},animatorFor:function(t){var e=t.$animator;return e||(e=new v(t),e.factory=this,t.$animator=e),e},destroy:function(t){delete t.subject.$animator},attribute:function(t){var e=this.attributes[t];if(!e){e=this.attributes[t]=en.attribute(t);var r=e.calculator,n=xr(r),i=n.parse(e.defaultValue,n.ZERO);e.calculatorName=r,e.calculator=n,e.defaultValue=i,e.name=t,e.parse=function(t,e){return this.calculator.parse(t,this.defaultValue,e)},e.cloneDefault=function(){return this.calculator.clone(this.defaultValue)}}return e}});var en={};en.attribute=function(t){return u(t)&&r(t.defaultValue)?t:s(t)&&t in en.attribute?en.attribute[t]:en.attribute["default"]},en.attribute["default"]={defaultValue:0},$r.extend(Fe,w,{parse:function(t,e,r,n){var i=t.and;i.factory=p(i.factory,t.factory),r.putMap(yr(i,e,!1,n.forObject))},merge:function(t,e,r,n){this.submerge(t.and,e,r,n)}}),$r.extend(Ve,w,{parse:function(t,e,n,i){var a=w.nextMergeId(),s=Sr(t.factory,i.forObject),u=t.deltas,c=t.values;if(r(u)){if(o(u)){var h={};for(var l in c)h[l]=u;u=h}}else u={};for(var l in c){for(var f=c[l],p=f.length-1,m=u[l],d=s.attribute(l),g=0;p>=g;g++)f[g]=d.parse(f[g]);if(!o(m)){m=[];for(var v=0;p>=v;v++)m[v]=v/p}var y=new Ue(l,d.calculator,f,m),b=i.parseEvent(l,y,this,!0);b.mergeId=a,n.put(l,b)}}}),$r.extend(Re,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t["final"];for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=wr(n.parseDelay(s)),h=Mr(n.parseDuration(s)),l=new z(s,u,c+h,!1,this,null,t);r.put(s,l)}},mergeAttrimator:function(t,e,r){t.delay=r.mergeDelay(e,t.delay)+r.mergeDuration(e,t.duration)}}),$r.extend($e,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.initial;for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=n.parseDelay(s),h=new z(s,u,c,!0,this,null,t);r.put(s,h)}},mergeAttrimator:function(t,e,r){t.delay=r.mergeDelay(e,t.delay)}}),$r.extend(ke,w,{aliases:{from:"0",start:"0",initial:"0",first:"0",half:"50",middle:"50",to:"100",end:"100",last:"100"},parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.keyframe,s=t.easings||{},o=Tr(p(e.teasing,kr.teasing)),u=!1;for(var c in a)if(c in this.aliases)a[this.aliases[c]]=a[c],delete a[c];else if(-1!==c.indexOf(",")){for(var h=c.split(","),l=0;l<h.length;l++)a[h[l]]=a[c];delete a[c],u=!0}var h=[],f=0,m=0;for(var c in a){var d=parseFloat(c);isNaN(d)?delete a[c]:(f>d&&(u=!0),h.push({order:d,key:c,value:a[c]}),f=d,m=Math.max(m,d))}if(u){h.sort(function(t,e){return t.order-e.order}),a={};for(var l=0;l<h.length;l++)a[h[l].key]=h[l].value}for(var g={},v={},y={},b={},l=0;l<h.length;l++){var x=h[l],w=p(x.value.easing,e.easing);delete x.value.easing;for(var A in x.value)A in g||(g[A]=[],v[A]=[],y[A]=[],b[A]=i.attribute(A)),g[A].push(x.order/m),v[A].push(b[A].parse(x.value[A])),y[A].push(Tr(p(s[A],w)))}for(var A in g){var M=n.parseDuration(A),T=n.parseDelay(A),I=n.parseSleep(A),N=n.parseOffset(A),C=n.parseRepeat(A),z=n.parseScale(A),O=n.parseScaleBase(A),P=n.parseParameters(),E=new ir(A,b[A].calculator,v[A],g[A],y[A]),q=new S(A,E,M,o,T,I,N,C,z,O,P,!0,this,null,t);r.put(A,q)}}}),$r.extend(De,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.move;for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=new lr(s,o.calculator,Q.current,Q.relative(u)),h=n.parseEvent(s,c,this,!0);r.put(s,h)}}}),$r.extend(je,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.path;for(var s in a){var o=i.attribute(s),u=a[s];u instanceof O||(u.name=s,u.calculator=o.calculator);var c=Er(u),h=n.parseEvent(s,c,this,!0);r.put(s,h)}}}),$r.extend(He,w,{parse:function(t,e,r,n){var i=(Sr(t.factory,n.forObject),t.physics);for(var a in i){var s=i[a],o=new P(a,this,s.calculator,p(s.position,!0),s.velocity,s.acceleration,s.terminal,s.stopAt);r.put(a,o)}},merge:!1}),$r.extend(Be,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.point;for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=new sr(s,o.calculator,u),h=n.parseEvent(s,c,this,!0);r.put(s,h)}}}),$r.extend(Le,w,{parse:function(t,e,r,n){var i=t.queue;i.factory=p(i.factory,t.factory),r.queueMap(yr(i,e,!1,n.forObject))},merge:function(t,e,r,n){this.submerge(t.queue,e,r,n)}}),$r.extend(Ze,w,{parse:function(t,e,n,i){var a=(Sr(t.factory,i.forObject),t.springs);for(var s in a){var o=a[s];r(o.attribute)||(o.attribute=s);var u=Vr(o);u!==!1&&(u.parser=this,n.put(s,u))}},merge:!1}),$r.extend(Ge,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.travel;for(var s in a){var o=a[s],u=i.attribute(s),c=u.parse(p(o.from,!0)),h=u.parse(p(o.to,!0)),l=Cr(o.velocity,0),f=Cr(o.acceleration,0),m=Cr(p(o.terminal,o.velocity),Number.POSITIVE_INFINITY),d=Cr(o.epsilon,.001);0!==f&&(f=Q.pointing(f,h,d,!0)),0!==l&&(l=Q.pointing(l,h,d,!1));var g=new P(s,this,u.calculator,c,l,f,m);r.put(s,g)}},merge:!1}),Q("pointing",function(t,e,r,n){function i(i,a){var s=a.getAttribute(i.attribute),o=s.calculator,u=K(e)?e(i,a):e,c=o.create();return function(){var e=i.position,a=o.copy(c,d(u)),s=o.sub(a,e),h=o.distance(s,o.ZERO);return r>h?i.stopIn(0):s=o.scale(s,t/h),n&&(s=o.sub(s,i.resolveVelocity())),s}}return Q(i)}),$r.extend(_e,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.tweenFrom;for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=new lr(s,o.calculator,u,Q.current),h=n.parseEvent(s,c,this,!0);r.put(s,h)}}}),$r.extend(Ye,w,{parse:function(t,e,r,n){var i=Sr(t.factory,n.forObject),a=t.tweenTo;for(var s in a){var o=i.attribute(s),u=o.parse(a[s]),c=new lr(s,o.calculator,Q.current,u),h=n.parseEvent(s,c,this,!0);r.put(s,h)}}}),$r.extend(Ue,O,{set:function(t,e,r){this.reset(t,e),this.deltas=Ar(r)},compute:function(t,e){for(var r=this.deltas,n=r.length-2,i=0;r[i+1]<e&&n>i;)i++;var a=r[i],s=r[i+1],o=(e-a)/(s-a),u=this.resolvePoint(i,e),c=this.resolvePoint(i+1,e);return this.calculator.interpolate(t,u,c,o)},copy:function(){return new Ue(this.name,this.calculator,l(this.points),l(this.deltas))}}),$r.extend(Xe,O,{set:function(t,e,r,n,i,a){this.reset(t,e),this.loop=r,this.matrix=n,this.weight=i,this.invert=a,this.temp=t.create()},compute:function(t,e){var r,n,i,a,s=this.calculator,o=this.temp,u=this.matrix,c=this.points.length-1,h=e*c,l=de(Math.floor(h),0,c-1),f=h-l,p=this.resolvePoint(l-1,e),m=this.resolvePoint(l,e),d=this.resolvePoint(l+1,e),g=this.resolvePoint(l+2,e);return this.invert?(a=1,i=f,n=f*i,r=f*n):(r=1,n=f,i=f*n,a=f*i),t=s.zero(t),o=s.zero(o),o=s.adds(o,p,u[0][0]),o=s.adds(o,m,u[0][1]),o=s.adds(o,d,u[0][2]),o=s.adds(o,g,u[0][3]),t=s.adds(t,o,r),o=s.zero(o),o=s.adds(o,p,u[1][0]),o=s.adds(o,m,u[1][1]),o=s.adds(o,d,u[1][2]),o=s.adds(o,g,u[1][3]),t=s.adds(t,o,n),o=s.zero(o),o=s.adds(o,p,u[2][0]),o=s.adds(o,m,u[2][1]),o=s.adds(o,d,u[2][2]),o=s.adds(o,g,u[2][3]),t=s.adds(t,o,i),o=s.zero(o),o=s.adds(o,p,u[3][0]),o=s.adds(o,m,u[3][1]),o=s.adds(o,d,u[3][2]),o=s.adds(o,g,u[3][3]),t=s.adds(t,o,a),t=s.scale(t,this.weight)},resolvePoint:function(t){var e=this.points,r=e.length,n=this.loops?(t+r)%r:de(t,0,r-1);return d(e[n])},copy:function(){return new Xe(this.name,this.calculator,l(this.points),this.loop,this.matrix,this.weight)},isLinear:function(){return!1}}),$r.extend(Qe,Xe,{set:function(t,e,r){this._set(t,e,r,Qe.MATRIX,Qe.WEIGHT,!0)},copy:function(){return new Qe(this.name,this.calculator,l(this.points),this.loop)}}),Qe.WEIGHT=1/6,Qe.MATRIX=[[-1,3,-3,1],[3,-6,3,0],[-3,0,3,0],[1,4,1,0]],$r.extend(We,O,{set:function(t,e,r){this.reset(t,e),this.weights=r||We.computeWeights(e.length),this.inverses=new Array(e.length)},compute:function(t,e){var r=this.calculator,n=this.inverses,i=this.weights,a=this.points.length,s=1;n[a-1]=1;for(var o=a-2;o>=0;o--)n[o]=n[o+1]*(1-e);t=r.zero(t);for(var o=0;a>o;o++)t=r.adds(t,this.resolvePoint(o,e),i[o]*n[o]*s),s*=e;return t},copy:function(){return new We(this.name,this.calculator,l(this.points),this.weights)},isLinear:function(){return!1}}),We.computeWeights=function(t){for(var e=new Array(t--),r=0;t>=r;r++)e[r]=me(t,r);return e},$r.extend(Ke,Xe,{set:function(t,e,r){this._set(t,e,r,Ke.MATRIX,Ke.WEIGHT,!1)},copy:function(){return new Ke(this.name,this.calculator,l(this.points),this.loop)}}),Ke.WEIGHT=.5,Ke.MATRIX=[[0,2,0,0],[-1,0,1,0],[2,-5,4,-1],[-1,3,-3,1]],$r.extend(Je,O,{set:function(t,e,r){for(var n=t.length,i=t[0].calculator,a=[],s=[],o=!0,u=!1,c=0;n>c;c++)a.push.apply(a,t[c].points),s[c]=(c+1)/n,t[c].isLinear()||(o=!1);if(e){for(var h=p(r,kr.comboPathUniformGranularity),l=0,f=[],c=0;n>c;c++)f[c]=t[c].length(h),l+=f[c];for(var m=0,c=0;n>c;c++)m+=f[c],s[c]=m/l;u=l}this.reset(i,a),this.paths=t,this.deltas=s,this.uniform=e,this.granularity=r,this.linear=o,this.cachedLength=u},isLinear:function(){return this.linear},length:function(t){return this.cachedLength!==!1?this.cachedLength:this._length(t)},compute:function(t,e){for(var r=this.paths,n=this.deltas,i=0,a=0;a<r.length-1&&n[a]<e;)i=n[a],a++;var s=e-i,o=n[a]-i,u=s/o;return r[a].compute(t,u)},copy:function(){return new Je(this.name,this.paths,this.uniform,this.granularity)}}),$r.extend(tr,O,{set:function(t,e){var r=t.calculator,n=tr.compile(r,t,e);this.reset(r,n),this.path=t,this.pointCount=e},compute:function(t,e){var r=this.points.length,n=Math.floor(e*r),i=de(n,0,r-1);return this.calculator.copy(t,this.resolvePoint(i,e))},copy:function(){return new tr(this.name,this,this.points.length)}}),tr.compile=function(t,e,r){if(e.points.length===r)return l(e.points);for(var n=[],i=0;r>i;i++)n.push(e.compute(t.create(),i/(r-1)));return n},$r.extend(er,O,{set:function(t,e,r,n,i){this.reset(t,[e,r,n,i])},compute:function(t,e){var r=this.calculator,n=e*e,i=e*n,a=1-e,s=a*a,o=a*s;return t=r.copy(t,this.resolvePoint(0,e)),t=r.scale(t,o),t=r.adds(t,this.resolvePoint(1,e),3*s*e),t=r.adds(t,this.resolvePoint(2,e),3*a*n),t=r.adds(t,this.resolvePoint(3,e),i)},copy:function(){return new er(this.name,this.calculator,this.points[0],this.points[1],this.points[2],this.points[3])},isLinear:function(){return!1}}),$r.extend(rr,O,{set:function(t,e,r,n,i){this.reset(t,[e,n]),this.startTangent=r,this.endTangent=i},compute:function(t,e){var r=this.calculator,n=e*e,i=n*e;return t=r.zero(t),t=r.adds(t,this.resolvePoint(0,e),2*i-3*n+1),t=r.adds(t,this.resolvePoint(1,e),-2*i+3*n),t=r.adds(t,d(this.startTangent),i-2*n+e),t=r.adds(t,d(this.endTangent),i-n)},copy:function(){return new rr(this.name,this.calculator,this.points[0],this.startTangent,this.points[1],this.endTangent)},isLinear:function(){return!1}}),$r.extend(nr,O,{set:function(t,e){this.reset(t,e)},compute:function(t,e){var r=Math.floor(e*this.points.length),n=Math.min(r,this.points.length-1);return this.calculator.copy(t,this.resolvePoint(n,e))},copy:function(){return new nr(this.name,this.calculator,l(this.points))}}),$r.extend(ir,O,{set:function(t,e,r,n){this.reset(t,e),this.deltas=Ar(r),this.easings=n},compute:function(t,e){var r=this.deltas,n=r.length-2;if(e<r[0])return!1;if(e>r[r.length-1])return this.points[r.length-1];for(var i=0;r[i+1]<e&&n>i;)i++;var a=r[i],s=r[i+1],o=(e-a)/(s-a),u=this.resolvePoint(i,e),c=this.resolvePoint(i+1,e),h=this.easings[i];return this.calculator.interpolate(t,u,c,h(o))},copy:function(){return new ir(this.name,this.calculator,l(this.points),l(this.deltas),l(this.easings))}}),$r.extend(ar,Ue,{set:function(t,e){var r=ar.getTimes(t,e);this._set(t,e,r)},copy:function(){return new ar(this.name,this.calculator,l(this.points))}}),ar.getTimes=function(t,e){var r=e.length-1,n=[];n[0]=0;for(var i=1;r>=i;i++)n[i]=n[i-1]+t.distance(e[i-1],e[i]);for(var a=1/n[r],i=1;r>i;i++)n[i]*=a;return n[r]=1,n},$r.extend(sr,O,{set:function(t,e){this.reset(t,[e])},compute:function(t,e){return this.calculator.copy(t,this.resolvePoint(0,e))},copy:function(){return new sr(this.name,this.calculator,this.points[0])}}),$r.extend(or,O,{set:function(t,e,r,n){this.reset(t,[e,r,n])},compute:function(t,e){var r=this.calculator,n=e*e,i=1-e,a=i*i;return t=r.copy(t,this.resolvePoint(0,e)),t=r.scale(t,a),t=r.adds(t,this.resolvePoint(1,e),2*i*e),t=r.adds(t,this.resolvePoint(2,e),n)},copy:function(){return new or(this.name,this.calculator,this.points[0],this.points[1],this.points[2])},isLinear:function(){return!1}}),$r.extend(ur,O,{set:function(t,e,r,n){this.reset(t,e),this.midpoint=r,this.loop=n,this.temp0=t.create(),this.temp1=t.create()},compute:function(t,e){var r=this.calculator,n=this.temp0,i=this.temp1,a=this.midpoint,s=1-a,o=.5*a,u=this.points.length-(this.loops?0:1),c=e*u,h=de(Math.floor(c),0,u-1),l=c-h,f=this.resolvePoint(h-1,e),p=this.resolvePoint(h,e),m=this.resolvePoint(h+1,e),d=this.resolvePoint(h+2,e);return a>l?(l/=a,n=r.interpolate(n,f,p,l*o+s+o),i=r.interpolate(i,p,m,l*o+o),p=n,m=i,l=.5*l+.5):l>s&&(l=(l-s)/a,n=r.interpolate(n,p,m,l*o+s),i=r.interpolate(i,m,d,l*o),p=n,m=i,l=.5*l),t=r.interpolate(t,p,m,l)},resolvePoint:function(t){var e=this.points,r=e.length,n=this.loops?(t+r)%r:de(t,0,r-1);return d(e[n])},copy:function(){return new ur(this.name,this.calculator,l(this.points),this.midpoint,this.loop)},isLinear:function(){return!1}}),$r.extend(cr,O,{set:function(t,e,r){this.reset(t.calculator,t.points),this.path=t,this.start=e,this.end=r},compute:function(t,e){return this.path.compute(t,(this.end-this.start)*e+this.start)},copy:function(){return new cr(this.name,this.path,this.start,this.end)}}),$r.extend(hr,Ue,{set:function(t,e){var r=t.calculator,n=tr.compile(r,t,e),i=ar.getTimes(r,n);this._set(r,n,i),this.path=t,this.pointCount=e},copy:function(){return new hr(this.name,this.path,this.pointCount)}}),$r.extend(lr,O,{set:function(t,e,r){this.reset(t,[e,r])},compute:function(t,e){return this.calculator.interpolate(t,this.resolvePoint(0,e),this.resolvePoint(1,e),e)},copy:function(){return new lr(this.name,this.calculator,this.points[0],this.points[1])}}),$r.extend(fr,q,{start:function(t,e){this._start(t,e),this.temp=this.calculator.create()},clone:function(){return new fr(this.attribute,this.calculator,this.position,this.rest,this.distance,this.damping,this.stiffness,this.velocity,this.gravity,this.finishOnRest)},updateVelocity:function(t){var e=this.calculator,r=this.resolveRest(),n=e.distance(this.position,r);this.temp=e.copy(this.temp,this.position),this.temp=e.sub(this.temp,r),0!==n&&(this.temp=e.scale(this.temp,1/n),this.temp=e.scale(this.temp,(n-this.distance)*this.stiffness)),this.temp=e.adds(this.temp,this.velocity,-this.damping),this.velocity=e.adds(this.velocity,this.temp,t)}}),$r.extend(pr,q,{start:function(t,e){this._start(t,e);var r=e.getAttribute(this.attribute),n=this.calculator;this.damping=this.parseValue(e,this.damping,r.defaultValue),this.stiffness=this.parseValue(e,this.stiffness,r.defaultValue),this.temp0=n.create(),this.temp1=n.create()},clone:function(){return new pr(this.attribute,this.calculator,this.position,this.rest,this.damping,this.stiffness,this.velocity,this.gravity,this.finishOnRest)},hasComputed:function(){return K(this.rest)||K(this.position)||K(this.gravity)||K(this.velocity)||K(this.damping)||K(this.stiffness)},updateVelocity:function(t){var e=this.calculator;this.temp1=e.copy(this.temp1,this.damping),this.temp1=e.mul(this.temp1,this.velocity),this.temp0=e.copy(this.temp0,this.position),this.temp0=e.sub(this.temp0,this.resolveRest()),this.temp0=e.mul(this.temp0,this.stiffness),this.temp0=e.sub(this.temp0,this.temp1),this.velocity=e.adds(this.velocity,this.temp0,t)}});var rn=function(){var t=0;return function(){return++t}}();$r.define(mr,{setAutoEnd:function(t){return this.autoEnd=t,this},sequence:function(t,e){return this.sequenceDelay=ln(t),this.sequenceEasing=Tr(e,Zr.linear),this},intro:function(t){return this.currentTimelines=this.getTimelines(t),this.introduce=!0,this},"with":function(t){return this.currentTimelines=this.getTimelines(t),this},add:function(t){var e=this.getTimelines(t);return this.currentTimelines.push.apply(this.currentTimelines,e),this},getTimeline:function(t){var e=t.$timelineId,n=this.timelines.get(e);return r(n)||(e=rn(),n=new gr(t),t.$timelineId=e,this.timelines.put(e,n)),n},getTimelines:function(t){var e=[];if(o(t))for(var r=0;r<t.length;r++){var n=F(t[r]);n!==!1&&e.push(this.getTimeline(n))}else{var n=F(t);n!==!1&&e.push(this.getTimeline(n))}return e},at:function(t){var e=ln(t,!1);if(e===!1)throw"Invalid time in Movie.at: "+t;return this.currentTime=e,this},seek:function(t){var e=ln(t,!1);if(e===!1)throw"Invalid time in Movie.seek: "+t;return this.at(this.currentTime+e)},end:function(){return this.at(this.duration())},play:function(t,e,r){var n=vr(t,e),i=this.introduce;return this.eachCurrentTimeline(function(t,e){t.playAttrimators(n.newAttrimators(),r,e,i)})},queue:function(t,e,r){var n=vr(t,e);return this.eachCurrentTimeline(function(t,e){t.queueAttrimators(n.newAttrimators(),r,e)})},transition:function(t,e,r,n){var t=Rr(t),i=vr(e,r);return this.eachCurrentTimeline(function(e,r){e.transitionAttrimators(i.newAttrimators(),n,r,t)})},eachCurrentTimeline:function(t){var e=this.currentTimelines,r=e.length-1,n=this.currentTime;if(this.sequenceDelay>0)for(var i=r*this.sequenceDelay,a=this.sequenceEasing,s=0;r>=s;s++)t(e[s],n+a(s/r)*i);else for(var s=0;r>=s;s++)t(e[s],n);return this.sequenceDelay=0,this.introduce=!1,this.autoEnd&&this.end(),this},duration:function(){for(var t=this.timelines.values,e=0,r=0;r<t.length;r++)e=Math.max(e,t[r].attrimators.timeRemaining());return e}}),ie(mr.prototype),$r.define(dr,{reverse:function(){return this.speed=-this.speed,this},backward:function(){return this.speed=-Math.abs(this.speed),this},forward:function(){return this.speed=Math.abs(this.speed),this},start:function(t,e){return this.time=0,t&&this.apply(this.time,e),this},end:function(t,e){return this.time=this.duration,t&&this.apply(this.time,e),this},play:function(){return this.playing||(this.currentTime=jr(),this.playing=!0,Xr(this.run)),this},pause:function(){return this.playing=!1,this},"goto":function(t,e,r){return this.time=ln(t),e&&this.apply(this.time,r),this},apply:function(t,e){for(var r=p(t,this.time),n=this.movie.timelines.values,i=[],a=0;a<n.length;a++){var s=n[a];r>=s.start&&i.push(s)}for(var a=0;a<i.length;a++)i[a].preupdate(r);for(var a=0;a<i.length;a++)i[a].update(r);for(var a=0;a<i.length;a++)i[a].apply();return e||this.trigger("apply",[this,r]),this},evaluatePlaying:function(){return this.playing&&(this.time<0?(this.time=0,this.playing=!1,this.trigger("start",[this])):this.time>this.duration&&(this.time=this.duration,this.playing=!1,this.trigger("end",[this]))),this},runner:function(t,e){return function(){var t=jr(),r=t-e.currentTime;e.time+=r*e.speed,e.currentTime=t,e.apply(),e.evaluatePlaying(),e.playing&&Xr(e.run)}}}),ie(dr.prototype),$r.define(gr,{playAttrimators:function(t,e,r,n){this.attrimators.size()?this.attrimators.playMapAt(t,e,r):(this.attrimators.putMap(t),this.attrimators.delay(r),n||(this.start=r))},queueAttrimators:function(t,e,r){e&&this.attrimators.stopNotPresentAt(t,r),this.attrimators.queueMap(t)},transitionAttrimators:function(t,e,r,n){e&&this.attrimators.stopNotPresentAt(t,r+n.time),this.attrimators.transitionMap(n,t,function(t){var e=this.attrimators.get(t),n=this.animator.getAttribute(t);return e?e.valueAtSearch(r,n.cloneDefault()):void 0},function(t){return this.animator.getAttribute(t)},function(t){this.attrimators.playAttrimatorAt(t,r)},function(t,e,n){return t.valueAtSearch(r+e,n)},function(t,e){t.stopAt(r+e)},this)},preupdate:function(t){for(var e=this.animator,r=this.attrimators.values,n=0;n<r.length;n++){var i=r[n],a=i.attribute,s=e.attrimators.get(a),o=i.attrimatorAt(t);s!==o&&(o?e.placeAttrimator(o):e.attrimators.remove(a))}this.animator.preupdate(t)},update:function(t){for(var e=this.animator,r=this.attrimators.values,n=0;n<r.length;n++){var i=r[n],a=i.attribute,s=e.getAttribute(a),o=s.calculator,u=e.frame[a];if(o.isValid(u)){var c=i.valueAtSearch(t,u);c!==!1&&(e.frame[a]=c,e.updated[a]=!0)}}},apply:function(){this.animator.apply()}});var nn={};nn.values=new Ve,nn.and=new Fe,nn["final"]=new Re,nn.initial=new $e,nn.point=new Be,nn.keyframe=new ke,nn.move=new De,nn.path=new je,nn.physics=new He,nn.queue=new Le,nn.springs=new Ze,nn.travel=new Ge,nn.tweenFrom=new _e,nn.tweenTo=new Ye;var an={};an.number=new Ce,an["2d"]=new Se,an["3d"]=new Ne,an.quaternion=new ze,an.rgb=new Oe,an.rgba=new Pe,an.string=new Ee,an["default"]=an.number;var sn={};sn.object=new qe,sn["default"]=sn.object;var on={};on.point=function(t){var e=xr(t.calculator),r=e.parse(t.defaultValue,e.ZERO);return new sr(t.name,e,e.parse(t.point,r))},on.combo=function(t){for(var e=t.paths,r=0;r<e.length;r++)e[r]=Er(e[r]);return new Je(t.name,e,t.uniform,t.granularity)},on.compiled=function(t){var e=Er(t.path);return new tr(t.name,e,t.n||t.pointCount)},on.cubic=function(t){var e=xr(t.calculator),r=e.parse(t.defaultValue,e.ZERO);return new er(t.name,e,e.parse(t.p0,r),e.parse(t.p1,r),e.parse(t.p2,r),e.parse(t.p3,r))},on.delta=function(t){var e=xr(t.calculator);if(!t.deltas){t.deltas=[];for(var r=0;r<t.points.length;r++)t.deltas[r]=r/(t.points.length-1)}return new Ue(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.deltas)},on.jump=function(t){var e=xr(t.calculator);return new nr(t.name,e,e.parseArray(t.points,t.points,t.defaultValue))},on.keyframe=function(t){var e=xr(t.calculator);if(!t.deltas){t.deltas=[];for(var n=0;n<t.points.length;n++)t.deltas[n]=n/(t.points.length-1)}var i=Tr(t.easings,null);if(!r(t.easings)||!o(t.easings)||null!==i){t.easings=[];for(var n=0;n<t.points.length;n++)t.easings[n]=i}for(var n=0;n<t.easings.length;n++)t.easings[n]=Tr(t.easings[n]);return new ir(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.deltas,t.easings)},on.quadratic=function(t){var e=xr(t.calculator),r=e.parse(t.defaultValue,e.ZERO);return new or(t.name,e,e.parse(t.p0,r),e.parse(t.p1,r),e.parse(t.p2,r))},on.tween=function(t){var e=xr(t.calculator),r=e.parse(t.defaultValue,e.ZERO);return new lr(t.name,e,e.parse(t.start,r),e.parse(t.end,r))},on.sub=function(t){var e=Er(t.path);return new cr(t.name,e,p(t.start,0),p(t.end,1))},on["quadratic-corner"]=function(t){var e=xr(t.calculator);return new ur(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.midpoint,t.loop)
},on.linear=function(t){var e=xr(t.calculator);return new ar(t.name,e,e.parseArray(t.points,t.points,t.defaultValue))},on.uniform=function(t){var e=Er(t.path);return new hr(t.name,e,t.n||t.pointCount)},on.hermite=function(t){var e=xr(t.calculator),r=e.parse(t.defaultValue,e.ZERO);return new rr(t.name,e,e.parse(t.start,r),e.parse(t.startTangent,r),e.parse(t.end,r),e.parse(t.endTangent,r))},on.bezier=function(t){var e=xr(t.calculator);return new We(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.weights)},on.parametric=function(t){var e=xr(t.calculator);return new Xe(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.loop,t.matrix,t.weight)},on["catmull-rom"]=function(t){var e=xr(t.calculator);return new Ke(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.loop)},on["basis-spline"]=function(t){var e=xr(t.calculator);return new Qe(t.name,e,e.parseArray(t.points,t.points,t.defaultValue),t.loop)};var un={};un.distance=function(t){return new fr(t.attribute,t.calculator,p(t.position,!0),p(t.rest,!0),t.distance,t.damping,t.stiffness,t.velocity,t.gravity,t.finishOnRest)},un.linear=function(t){return new pr(t.attribute,t.calculator,p(t.position,!0),p(t.rest,!0),t.damping,t.stiffness,t.velocity,t.gravity,t.finishOnRest)};var cn={},hn=function(){var t={inf:Number.POSITIVE_INFINITY,infinity:Number.POSITIVE_INFINITY,infinite:Number.POSITIVE_INFINITY,once:1,twice:2,thrice:3,dozen:12,random:4};return function(e,r){if(i(e))return e;if(s(e)){if(e=e.toLowerCase(),e in t)return t[e];var n=parseInt(e);if(!isNaN(n))return n}return p(r,kr.repeat)}}(),ln=function(){var t=/^(-?\d*(\.\d+)|-?\d+)(ms|s|c|cs|third|jiffy|sec|m|min|h|hr)?$/,e={ms:1,c:100,cs:100,jiffy:1e3/60,third:1e3/60,s:1e3,sec:1e3,m:6e4,min:6e4,h:36e5,hr:36e5};return function(r,n){if(i(r))return Math.floor(r);if(s(r)){var a=t.exec(r);if(a){var r=parseFloat(a[1]),o=a[3];return o in e&&(r*=e[o]),Math.floor(r)}}return p(n,0)}}(),fn={};return ie(F),F.anim8s=V,F.fn=v.prototype,V.fn=y.prototype,F.isRunning=R,F.isLive=$,F.setLive=k,F.animating=Ur,F.requestRun=Xr,F.activateAnimator=D,F.pushAnimator=j,F.activate=H,F.run=B,F.pause=L,F.resume=Z,F.stop=G,F.end=_,F.finish=Y,F.nopeat=U,F.noop=e,F.isDefined=r,F.isFunction=n,F.isNumber=i,F.isBoolean=a,F.isString=s,F.isArray=o,F.isObject=u,F.isEmpty=c,F.now=jr,F.trim=Hr,F.toArray=h,F.copy=l,F.extend=f,F.coalesce=p,F.constant=m,F.resolve=d,F.id=Br,F.Class=$r,F.Defaults=kr,F.clamp=de,F.clamper=ge,F.gcd=pe,F.choose=me,F.toDegrees=ve,F.toRadians=ye,F.modder=be,F.Animations=Jr,F.Calculators=an,F.Factories=sn,F.Builders=w,F.Paths=on,F.Springs=un,F.Easings=Zr,F.EasingTypes=Lr,F.Options=cn,F.Transitions=fn,F.animation=vr,F.attrimatorsFor=yr,F.calculator=xr,F.delay=wr,F.duration=Mr,F.easing=Tr,F.easingType=Ir,F.factory=Sr,F.factoryFor=Nr,F.number=Cr,F.offset=zr,F.options=Or,F.builder=br,F.path=Er,F.repeat=hn,F.scale=qr,F.sleep=Fr,F.spring=Vr,F.time=ln,F.transition=Rr,F.deltas=Ar,F.Color=X,F.computed=Q,F.isComputed=K,F.resolveComputed=J,F.composite=ee,F.partial=re,F.spread=ne,F.eventize=ie,F.save=Me,F.saveGroup=Te,F.SaveOptions=tn,F.translate=Ie,F.param=xe,F.paramFactory=we,F.paramCalculator=Ae,F.Parameters=Kr,F.Aninmation=g,F.Animator=v,F.Animators=y,F.Attrimator=b,F.AttrimatorMap=x,F.Calculator=M,F.Defer=T,F.DeferAnimator=I,F.Event=S,F.EventState=Gr,F.Factory=N,F.FastMap=C,F.Oncer=z,F.Builder=w,F.Path=O,F.Physics=P,F.Sequence=E,F.Spring=q,F.Movie=mr,F.MoviePlayer=dr,F.MovieTimeline=gr,F.Calculator2d=Se,F.Calculator3d=Ne,F.CalculatorNumber=Ce,F.CalculatorQuaternion=ze,F.CalculatorRGB=Oe,F.CalculatorRGBA=Pe,F.CalculatorString=Ee,F.object=en,F.FactoryObject=qe,F.BuilderAnd=Fe,F.BuilderDeltas=Ve,F.BuilderFinal=Re,F.BuilderInitial=$e,F.BuilderKeyframe=ke,F.BuilderMove=De,F.BuilderPath=je,F.BuilderPhysics=He,F.BuilderQueue=Le,F.BuilderSpring=Ze,F.BuilderTravel=Ge,F.BuilderTweenFrom=_e,F.BuilderTweenTo=Ye,F.PathBasisSpline=Qe,F.PathBezier=We,F.PathCatmullRom=Ke,F.PathCombo=Je,F.PathCompiled=tr,F.PathCubic=er,F.PathDelta=Ue,F.PathHermite=rr,F.PathJump=nr,F.PathKeyframe=ir,F.PathLinear=ar,F.PathParametric=Xe,F.PathQuadratic=or,F.PathQuadraticCorner=ur,F.PathSub=cr,F.PathUniform=hr,F.PathTween=lr,F.PathPoint=sr,F.SpringDistance=fr,F.SpringLinear=pr,F});
//# sourceMappingURL=anim8js.min.js.map